(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_Prop__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(144);function IsJsArray(e){return(e=e||"").length>1&&e.startsWith("[")&&e.endsWith("]")}function ParseJsArray(text){try{return eval(text)}catch(error){return[]}}__webpack_exports__.a=function(e){var a=e.id,t=e.description||"";IsJsArray(t)&&(t=ParseJsArray(t).map(function(e,t){return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Prop__WEBPACK_IMPORTED_MODULE_1__.a,Object.assign({key:"".concat(a,"_").concat(t)},{id:"".concat(a,"_").concat(t),_key:e.key,value:e.value}))}));return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement("div",{className:"card-text small text-justify"},t)}},144:function(e,a,t){"use strict";var n=t(0),r=t.n(n),o=function(e){e.id;var a=e.text,t=e.style;return(a=a||"").length>0&&(a+=":"),t=t||{},r.a.createElement("div",{className:"label",style:t},a)},c=function(e){e.id;var a=e.text,t=e.style;return a=a||"",t=t||{},r.a.createElement("div",{className:"value",style:t},a)};a.a=function(e){var a=e.id,t=e._key,n=e.value;return(t=t||{}).id="".concat(a,"_key"),(n=n||{}).id="".concat(a,"_value"),r.a.createElement("div",{className:"desc-container"},r.a.createElement(o,{id:"".concat(t.id,"_body"),text:t.text,style:t.style}),r.a.createElement(c,{id:"".concat(n.id,"_body"),text:n.text,style:n.style}))}},146:function(e,a,t){e.exports=t(305)},154:function(e,a,t){},305:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(31),c=t(10);t(154),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=t(14),l=t(15),s=t(17),d=t(16),u=t(23),p=t(18),f=t(7),m=t(54),h=function(e){var a=e.id,t=e.description||"";if(!t.includes(":"))return t;var n=t.split(";").filter(function(e){return null!=e&&e.length>0}).map(function(e){return e.split(":")}).map(function(e,t){return r.a.createElement("div",{key:"".concat(a,"_").concat(t),className:"desc-container"},r.a.createElement("div",{className:"label"},e[0],":"),r.a.createElement("div",{className:"value"},e[1]))});return r.a.createElement("div",{className:"card-text small text-justify"},n)},b=function(e){var a=e.visible;return r.a.createElement("div",{className:"lds-hourglass",style:{display:a?"inline-block":"none",position:"absolute",bottom:0,right:0}})},v=function(e){var a=e.bgcolor,t=e.completed,n={height:"100%",width:"".concat(t,"%"),backgroundColor:a,borderRadius:"inherit",textAlign:"right",transition:"width 1s ease-in-out",padding:0,margin:0};return r.a.createElement("div",{style:{height:5,width:"100%",backgroundColor:"transparent",borderRadius:"0.2rem",padding:0,margin:0}},r.a.createElement("div",{style:n},r.a.createElement("span",{style:{display:"none",padding:0,margin:0,color:"white",fontWeight:"bold",fontSize:"xx-small"}},"".concat(t,"%"))))},y=function(e){var a=e.id,t=e.name,n=e.description,o=e.state,c=e.shared,i=e.editable,l=e.shareBoard,s=e.deleteBoard;return r.a.createElement("div",{id:"".concat(a),className:"card-wrapper float-left m-3"},r.a.createElement("div",{className:"card shadow board"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title mb-0"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"mr-auto"},r.a.createElement(m.a,{className:"text-info",style:{textDecoration:"none",fontWeight:"500"},to:"".concat("/kanban-ui","/board/").concat(a)},t)),r.a.createElement("div",{className:"hover-card-badges",style:{display:i?"inline":"none"}},r.a.createElement("i",{className:"fa fa-fw fa-pencil text-muted",title:"edit"}),r.a.createElement("i",{className:"fa fa-fw fa-eye text-muted",title:"public",style:{display:c?"inline":"none"},onClick:function(){return l(a,!1)}}),r.a.createElement("i",{className:"fa fa-fw fa-eye-slash text-muted",title:"private",style:{display:c?"none":"inline"},onClick:function(){return l(a,!0)}}),r.a.createElement("i",{className:"fa fa-fw fa-trash text-muted",title:"delete",onClick:function(){return s(a,t)}}))))),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"board-body-wrapper"},r.a.createElement(h,Object.assign({key:a},{id:a,description:n}))),r.a.createElement(b,Object.assign({id:"spinner-".concat(a),key:a},{visible:"loading"===o}))),r.a.createElement("div",{style:{display:(o||"").startsWith("progress")?"block":"none",position:"absolute",bottom:0,left:0,width:"100%"}},r.a.createElement(v,{bgcolor:"#17a2b8",completed:(o||"").split(":")[1]||100}))))},E=t(6),w=t.n(E),C=t(13),g=t(134),O=t.n(g).a.create({baseURL:"https://dmitrybodnar.com"});var _=function(e,a){return console.log("main: shared worker is not available"),void O.post("/v1/api/command/".concat(e),a)},k=function(e){return{type:"FILTER_BOARDS",filter:e}},N=function(e){return function(){var a=Object(C.a)(w.a.mark(function a(t){var n;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.get("/v1/api/board/".concat(e));case 2:n=a.sent,t({type:"FETCH_BOARD",payload:n.data});case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},j=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.post("/v1/api/board",{name:e,owner:a,layout:"H",shared:!1});case 2:r=t.sent,n({type:"CREATE_BOARD",payload:r.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},I=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:_(e,[{id:e,board_id:e,type:8,payload:{layout:a}}]),n({type:"LAYOUT_BOARD",payload:a});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},S=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.put("/v1/api/board/".concat(e,"/rename"),{name:a});case 2:r=t.sent,n({type:"RENAME_BOARD",payload:r.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},B=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.put("/v1/api/board/".concat(e,"/share"),{shared:a});case 2:r=t.sent,n({type:"SHARE_BOARD",payload:r.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},A=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=3;break}return t.next=3,O.delete("/v1/api/board/".concat(e));case 3:n({type:"DELETE_BOARD",payload:e});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},x=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).deleteBoard=function(e,a){var n=t.props,r=n.onConfirm,o=n.deleteBoard;r&&o&&r(void 0,"Delete ".concat(a,"?"),function(){return o(e,!1)})},t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchBoards)(e.currentUserId)}},{key:"componentDidUpdate",value:function(e){var a=this.props,t=a.fetchBoards,n=a.currentUserId;n!==e.currentUserId&&t(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid board-list"},r.a.createElement("div",{className:"lane-wrapper lane-item"},r.a.createElement("div",{className:"lane-body"},this.props.boards.map(function(a){return r.a.createElement(y,Object.assign({key:a.id},Object(f.a)({},a,{editable:e.props.isSignedIn&&e.props.currentUserId===a.owner,shareBoard:e.props.shareBoard,deleteBoard:e.deleteBoard})))}))))}}]),a}(r.a.Component),L=Object(c.b)(function(e){var a=Object.values(e.boards),t=e.filter.toLowerCase();return{boards:a.filter(function(e){return(e.name||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)||(e.owner||"").toLowerCase().includes(t)}),currentUserId:e.auth.isSignedIn?e.auth.user:null,isSignedIn:e.auth.isSignedIn}},{fetchBoards:function(e){return function(){var a=Object(C.a)(w.a.mark(function a(t){var n;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=6;break}return a.next=3,O.get("/v1/api/board?owner=".concat(e));case 3:a.t0=a.sent,a.next=9;break;case 6:return a.next=8,O.get("/v1/api/board");case 8:a.t0=a.sent;case 9:n=a.t0,t({type:"FETCH_BOARDS",payload:n.data});case 11:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},shareBoard:B,deleteBoard:A})(x),D=t(307),R=t(310),T=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.get("/v1/api/board/".concat(e,"/lanes/").concat(a));case 2:r=t.sent,n({type:"FETCH_LANE",payload:r.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},H=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.post("/v1/api/board/".concat(e,"/lanes"),{name:a,layout:"H",type:"L"});case 2:r=t.sent,n({type:"CREATE_LANE",payload:r.data}),_(e,[{id:r.data.id,board_id:e,type:5,payload:{parent_id:e}}]);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},F=function(e,a,t){return function(){var n=Object(C.a)(w.a.mark(function n(r){var o;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.post("/v1/api/board/".concat(e,"/lanes"),{name:t,type:"C"});case 2:o=n.sent,r({type:"CREATE_LANE",payload:o.data}),_(e,[{id:o.data.id,board_id:e,type:5,payload:{parent_id:a}}]);case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},U=function(e,a,t,n){return function(r){n||_(e,[{id:t,board_id:e,type:3,payload:{parent_id:a}}]),r({type:"DELETE_LANE",payload:{boardId:e,laneId:t}})}},P=function(e,a,t){return function(n){_(e,[{id:t,board_id:e,type:4,payload:{parent_id:a}},{id:t,board_id:e,type:3,payload:{parent_id:a}}]),n({type:"EXCLUDE_LANE",payload:{boardId:e,laneId:t,parentId:a}}),n({type:"DELETE_LANE",payload:{boardId:e,laneId:t}})}},M=function(e,a){return function(){var t=Object(C.a)(w.a.mark(function t(n){var r;return w.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.get("/v1/api/board/".concat(e,"/cards/").concat(a));case 2:r=t.sent,n({type:"FETCH_CARD",payload:r.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},z=function(e,a,t,n){return function(r){n||_(e,[{id:t,board_id:e,type:1,payload:{parent_id:a}}]),r({type:"DELETE_CARD",payload:{boardId:e,cardId:t}})}},W=t(12),V=t(135),K=t(136),Y=function(e){return function(a,t,n){return e(function(e,t){var n,r=performance.now(),o=a(e,t),c=performance.now(),i=(n=c-r,Math.round(100*n)/100);return console.log("reducer process time:",i),o},t,n)}},q=function(e){return function(a){return function(t){console.group(t.type||"THUNK"),console.info("dispatching",t);var n=a(t);return console.log("next state",e.getState()),console.groupEnd(),n}}},J={isSignedIn:!1,user:null},G=t(27),X=t(4),$=t.n(X),Q=t(309),Z=window.SpeechRecognition||window.webkitSpeechRecognition,ee=null,ae=0,te={},ne=localStorage.getItem("speech.lang")||"en-US";function re(e,a){var t=$.a.find(te,function(e){return e instanceof Function});t&&t(e,a)}function oe(){setTimeout(function(){ee&&ee.start()},500)}var ce=function(){console.log("Listen"),(ee=function(){var e=new Z;return e.continuous=!1,e.lang=ne,e.interimResults=!1,e.maxAlternatives=5,e.onspeechend=function(){console.log("speech end"),e.stop(),oe()},e.onresult=function(e){var a=e.results[0][0].transcript;console.log("speech success: "+a),re(!0,a)},e.onerror=function(e){console.log("speech error"),re(!1),oe()},e}()).start()},ie=function(){console.log("Stop"),te={},ee&&(ee.stop(),ee=null)},le={isSpeechEnabled:void 0!==Z,isSpeechOn:!1,isSpeechError:!1,speechLang:localStorage.getItem("speech.lang")||"en-US",speechCmd:"",speechResult:!0},se=Object(W.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SIGN_IN":return Object(f.a)({},e,{isSignedIn:!0,user:a.payload});case"SIGN_OUT":return Object(f.a)({},e,{isSignedIn:!1,user:null});default:return e}},boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FETCH_BOARDS":return Object(f.a)({},$.a.mapKeys(a.payload,"id"));case"CREATE_BOARD":case"FETCH_BOARD":case"RENAME_BOARD":case"SHARE_BOARD":return Object(f.a)({},e,Object(G.a)({},a.payload.id,a.payload));case"DELETE_BOARD":return $.a.omit(e,a.payload);default:return e}},board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0,t=null;switch(a.type){case"FETCH_BOARD":return function(e){var a=[],t=[];return function e(a,t){t(a),a.lanes&&a.lanes.forEach(function(a){return e(a,t)}),a.cards&&a.cards.forEach(function(a){return e(a,t)})}(e,function(n){if(n.type){var r=(n.lanes||n.cards||[]).map(function(e){return e.id});a.push($.a.omit(Object(f.a)({},n,{children:r}),["lanes","cards"]))}else n.id!==e.id&&t.push(n)}),Object(f.a)({},e,{children:(e.lanes||[]).map(function(e){return e.id}),lanes:$.a.mapKeys(a,"id"),cards:$.a.mapKeys(t,"id")})}(a.payload);case"LAYOUT_BOARD":return Object(f.a)({},e,{layout:a.payload});case"FETCH_LANE":return Object(f.a)({},e,{lanes:Object(f.a)({},e.lanes,Object(G.a)({},a.payload.id,Object(f.a)({},a.payload,{children:a.payload.children||[]})))});case"CREATE_LANE":return Object(f.a)({},e,{lanes:Object(f.a)({},e.lanes,Object(G.a)({},a.payload.id,Object(f.a)({},a.payload,{children:[]})))});case"DELETE_LANE":return e.lanes[a.payload.laneId]?Object(f.a)({},e,{lanes:$.a.omit(e.lanes,a.payload.laneId)}):e;case"APPEND_LANE":return(t=e.lanes[a.payload.parentId])?(t.children=t.children||[],t.children.push(a.payload.laneId)):e.children.push(a.payload.laneId),Object(f.a)({},e);case"EXCLUDE_LANE":return e.lanes[a.payload.parentId]?e.lanes[a.payload.parentId].children=$.a.pull(e.lanes[a.payload.parentId].children,a.payload.laneId):e.children=$.a.pull(e.children,a.payload.laneId),Object(f.a)({},e);case"LAYOUT_LANE":return e.lanes[a.payload.laneId]?(e.lanes[a.payload.laneId].layout=a.payload.layout,Object(f.a)({},e)):e;case"APPEND_CARD":return e.lanes[a.payload.laneId]?(e.lanes[a.payload.laneId].children.push(a.payload.cardId),Object(f.a)({},e)):e;case"EXCLUDE_CARD":return e.lanes[a.payload.laneId]?(e.lanes[a.payload.laneId].children=$.a.pull(e.lanes[a.payload.laneId].children,a.payload.cardId),Object(f.a)({},e)):e;case"CREATE_CARD":case"FETCH_CARD":return Object(f.a)({},e,{cards:Object(f.a)({},e.cards,Object(G.a)({},a.payload.id,a.payload))});case"DELETE_CARD":return e.cards[a.payload.cardId]?Object(f.a)({},e,{cards:$.a.omit(e.cards,a.payload.cardId)}):e;default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"FILTER_BOARDS":return a.filter.toLowerCase();default:return e}},form:Q.a,activeBoard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ACTIVE_BOARD":return a.payload;case"CLEAN_BOARD":return null;default:return e}},speech:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SPEECH_ON":return Object(f.a)({},e,{isSpeechOn:e.isSpeechEnabled,speechCmd:""});case"SPEECH_OFF":return Object(f.a)({},e,{isSpeechOn:!1,isSpeechError:!1,speechCmd:""});case"SPEECH_ERROR":return Object(f.a)({},e,{isSpeechError:!0});case"SPEECH_CMD":return Object(f.a)({},e,{isSpeechError:!1,speechCmd:a.payload.cmd,speechResult:a.payload.executed});case"SPEECH_LANG":return Object(f.a)({},e,{speechLang:a.payload});default:return e}}}),de=function(){var e=[q,V.a],a=[W.applyMiddleware.apply(void 0,e),Y],t=K.composeWithDevTools.apply(void 0,a);return Object(W.createStore)(se,{},t)}(),ue=0,pe=1,fe=2,me=3,he=4,be=5,ve=6,ye=7,Ee=8,we=null;function Ce(e,a){console.log("websocket: send",JSON.parse(a)),e.send(a)}function ge(e){switch(e.type){case ve:case ue:return void M(e.board_id,e.id)(de.dispatch);case ye:case pe:return void T(e.board_id,e.id)(de.dispatch);case Ee:case fe:return void N(e.board_id)(de.dispatch);case me:return void z(e.board_id,void 0,e.id,!0)(de.dispatch);case he:return void U(e.board_id,void 0,e.id,!0)(de.dispatch);case be:return void A(e.board_id,!0)(de.dispatch)}}var Oe=function(e){if(!we)return console.log("websocket not available"),void(we=function(e){var a=new WebSocket("".concat("wss://dmitrybodnar.com","/v1/api/notify"));return a.onopen=function(t){console.log("websocket opened"),e&&Ce(a,e)},a.onclose=function(e){console.log("websocket closed"),we=null},a.onmessage=function(e){var a=JSON.parse(e.data);if(console.log("websocket: receive",a),a&&a.length){var t=!0,n=!1,r=void 0;try{for(var o,c=a[Symbol.iterator]();!(t=(o=c.next()).done);t=!0)ge(o.value)}catch(i){n=!0,r=i}finally{try{t||null==c.return||c.return()}finally{if(n)throw r}}}else console.log("array is expected by socket!")},a}(e));Ce(we,e)},_e=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).onSignInClick=function(){var e=t.props.getToken();t.props.signIn(e),localStorage.setItem("auth.token",e),t.props.clearValue()},t.onSignOutClick=function(){t.props.signOut(),t.props.clearValue(),localStorage.removeItem("auth.token")},t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("auth.token");null!=e&&this.props.signIn(e)}},{key:"render",value:function(){return null===this.props.isSignedIn?null:this.props.isSignedIn?r.a.createElement("button",{onClick:this.onSignOutClick,className:"btn btn-info btn-sm",title:this.props.user},r.a.createElement("i",{className:"fa fa-fw fa-lock"})):r.a.createElement("button",{onClick:this.onSignInClick,className:"btn btn-info btn-sm"},r.a.createElement("i",{className:"fa fa-fw fa-unlock"}))}}]),a}(r.a.Component),ke=Object(c.b)(function(e){return{isSignedIn:e.auth.isSignedIn,user:e.auth.user}},{signIn:function(e){return function(){var a=Object(C.a)(w.a.mark(function a(t){var n;return w.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,O.post("/Tenant/Token",{},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});case 2:n=a.sent,t({type:"SIGN_IN",payload:n.data.User});case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},signOut:function(){return{type:"SIGN_OUT"}}})(_e),Ne=function(e,a){return a.owner&&a.activeBoardId},je=function(e,a,t){return e.enabled?e.enabled(a,t):e},Ie=function(e){var a=e.filter.toLowerCase();return $.a.omitBy(e.boards,function(e){return!((e.name||"").toLowerCase().includes(a)||(e.description||"").toLowerCase().includes(a)||(e.owner||"").toLowerCase().includes(a))})};var Se={create:{commands:["create","\u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438"],enabled:Ne,fn:function(e,a){a.createLane(a.activeBoardId,"Lane")}},vertical:{commands:["layout vertical","vertical","rows","\u0440\u044f\u0434\u043a\u0438","\u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0438\u0439"],enabled:function(){return!1},fn:function(e,a){a.layoutLane(a.activeBoardId,void 0,"V")}},horizontal:{commands:["layout horizontal","horizontal","columns","\u043a\u043e\u043b\u043e\u043d\u043a\u0438","\u0441\u0442\u043e\u0432\u043f\u0447\u0438\u043a\u0438","\u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0438\u0439"],enabled:function(){return!1},fn:function(e,a){a.layoutLane(a.activeBoardId,void 0,"H")}}};var Be={mute:{commands:["mute","\u0432\u0438\u043a\u043b\u044e\u0447\u0438\u0442\u0438"],fn:function(e,a){a.speechOff()}},reload:{commands:["reload","\u043e\u043d\u043e\u0432\u0438\u0442\u0438"],fn:function(e,a){window.location.reload()}}};function Ae(e,a,t,n){n()}var xe=100;var Le={in:{commands:["\u0437\u0431\u0456\u043b\u044c\u0448\u0438\u0442\u0438","\u0431\u0456\u043b\u044c\u0448\u0435","zoom","zoom zoom","zoom in","bigger"],fn:function(){xe=Math.round(1.25*xe),document.body.style.zoom="".concat(xe,"%")}},out:{commands:["zoom out","\u0437\u043c\u0435\u043d\u0448\u0438\u0442\u0438","\u043c\u0435\u043d\u0448\u0435","smaller"],fn:function(){xe=Math.round(.75*xe),document.body.style.zoom="".concat(xe,"%")}},reset:{commands:["zoom reset","reset zoom","normal zoom","original","\u043e\u0440\u0438\u0433\u0456\u043d\u0430\u043b"],fn:function(){xe=100,document.body.style.zoom="".concat(xe,"%")}}};var De={english:{commands:["\u0430\u043d\u0433\u043b\u0456\u0439\u0441\u044c\u043a\u0430","english"],fn:function(e,a){a.speechLang("en-US",function(e){return a.speechCmd(e,a)})}},ukrainian:{commands:["ukrainian"],fn:function(e,a){a.speechLang("uk-UA",function(e){return a.speechCmd(e,a)})}}},Re={clear:{commands:["clear","\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0438","\u043f\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0438","\u0441\u0442\u0435\u0440\u0442\u0438"],fn:function(){console.clear()}}};var Te={top:{commands:["\u0432\u0433\u043e\u0440\u0443","\u0432\u0432\u0435\u0440\u0445","scroll top","scroll up","scroll start","go up"],fn:function(){window.scrollTo({left:0,top:0,behavior:"smooth"})}},bottom:{commands:["\u0432\u043d\u0438\u0437","scroll bottom","scroll down","scroll end","go down"],fn:function(){window.scrollTo({left:0,top:document.body.scrollHeight,behavior:"smooth"})}},up:{commands:["up","north","\u0432\u0438\u0449\u0435","\u043f\u0456\u0432\u043d\u0456\u0447"],fn:function(){window.scrollBy(0,-300)}},down:{commands:["down","south","\u043d\u0438\u0436\u0447\u0435","\u043f\u0456\u0432\u0434\u0435\u043d\u044c"],fn:function(){window.scrollBy(0,300)}},left:{commands:["left","west","\u043b\u0456\u0432\u043e","\u043b\u0456\u0432\u0456\u0448\u0435","\u0437\u0430\u0445\u0456\u0434"],fn:function(){window.scrollBy(-300,0)}},right:{commands:["right","east","\u043f\u0440\u0430\u0432\u043e","\u043f\u0440\u0430\u0432\u0456\u0448\u0435","\u0441\u0445\u0456\u0434"],fn:function(){window.scrollBy(300,0)}}};var He={filter:{commands:["filter","\u0444\u0456\u043b\u044c\u0442\u0440"],fn:function(e,a){var t=e.split(" ")[1];if(!t)return;t=t.toLowerCase(),a.filterBoards(t)}},own:{commands:["owner","own","\u043c\u043e\u0457","\u043c\u043e\u0454"],fn:function(e,a){a.filterBoards(a.owner||"")}},drop:{commands:["drop filter","\u0441\u043a\u0438\u043d\u0443\u0442\u0438 \u0444\u0456\u043b\u044c\u0442\u0440","all","everything","unfiltered","\u0432\u0441\u0435","\u0431\u0435\u0437 \u0444\u0456\u043b\u044c\u0442\u0440\u0430"],fn:function(e,a){a.filterBoards("")}}};var Fe=t(24),Ue=Object(Fe.a)();function Pe(e,a){return a.owner}function Me(e){return $.a.omitBy(Ie(e),function(a){return!((a.owner||"")==(e.owner||""))})}var ze,We={board:{create:{commands:["create","\u0441\u0442\u0432\u043e\u0440\u0438\u0442\u0438"],enabled:function(e,a){return a.owner&&!a.activeBoardId},fn:function(e,a){a.createBoard("Board",a.owner)}},delete:{commands:["delete","remove","\u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438"],enabled:function(e,a){return a.owner&&!a.activeBoardId},fn:function(e,a,t,n){var r=$.a.keys(Me(a));t("Confirm","Remove ".concat(r.length," boards?"),function(){n(),$.a.each(r,function(e){return a.deleteBoard(e,!1)})})}},name:{commands:["name","\u043d\u0430\u0437\u0432\u0430\u0442\u0438"],enabled:Pe,fn:function(e,a,t,n){var r=e.slice(e.indexOf(" ")).trim();if(!r)return;if(a.activeBoardId)a.renameBoard(a.activeBoardId,r);else{var o=$.a.keys(Me(a));t("Confirm","Rename ".concat(o.length,' boards to "').concat(r,'"?'),function(){n(),$.a.each(o,function(e){return a.renameBoard(e,r)})})}}},vertical:{commands:["layout vertical","vertical","rows","\u0440\u044f\u0434\u043a\u0438","\u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u0438\u0439","\u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u043e"],enabled:Ne,fn:function(e,a){a.layoutBoard(a.activeBoardId,"V")}},horizontal:{commands:["layout horizontal","horizontal","columns","\u043a\u043e\u043b\u043e\u043d\u043a\u0438","\u0441\u0442\u043e\u0432\u043f\u0447\u0438\u043a\u0438","\u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0438\u0439","\u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e"],enabled:Ne,fn:function(e,a){a.layoutBoard(a.activeBoardId,"H")}},share:{commands:["share","\u043f\u0443\u0431\u043b\u0456\u0447\u043d\u0430"],enabled:Pe,fn:function(e,a){a.activeBoardId?a.shareBoard(a.activeBoardId,!0):$.a.each($.a.keys(Me(a)),function(e){return a.shareBoard(e,!0)})}},private:{commands:["private","\u043f\u0440\u0438\u0432\u0430\u0442\u043d\u0430"],enabled:Pe,fn:function(e,a){a.activeBoardId?a.shareBoard(a.activeBoardId,!1):$.a.each($.a.keys(Me(a)),function(e){return a.shareBoard(e,!1)})}},count:{commands:["count"],fn:function(e,a){var t=Ie(a);console.log($.a.keys(t).length)}}},console:Re,control:Be,filter:He,help:(ze=function(){return We},{help:{commands:["help","commands","\u0434\u043e\u043f\u043e\u043c\u043e\u0433\u0430"],fn:function(e,a,t,n){return function(e,a,t,n,o){var c=function(e,n){return r.a.createElement("li",{key:n},n,je(e,a,t)?"":"*"," (say:"," ",e.commands.join(", "),")")},i=$.a.map($.a.map(e(),function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("b",null,a.toUpperCase()),r.a.createElement("br",null),r.a.createElement("ul",null,$.a.map(e,c)))}));n("Voice commands",r.a.createElement("div",{className:"",style:{fontSize:"x-small"}},i))}(ze,e,a,t)}},close:{commands:["close","cancel","\u0437\u0430\u043a\u0440\u0438\u0442\u0438"],fn:Ae}}),lane:Se,language:De,navigation:{home:{commands:["go home","\u0434\u043e\u0434\u043e\u043c\u0443"],enabled:Ne,fn:function(){Ue.push("".concat("/kanban-ui","/"))}},first:{commands:["first","\u043f\u0435\u0440\u0448\u0430","\u043f\u0435\u0440\u0448\u0438\u0439","\u043f\u0435\u0440\u0448\u0443"],fn:function(e,a){var t=e.split(" ")[1];if(!t){var n=$.a.keys(Ie(a));if(0==n.length)return;var r=n[0];return void Ue.push("".concat("/kanban-ui","/board/").concat(r))}t=t.toLowerCase(),(r=$.a.findKey(Ie(a),function(e){return(e.name||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)}))&&Ue.push("".concat("/kanban-ui","/board/").concat(r))}},last:{commands:["last","\u043e\u0441\u0442\u0430\u043d\u043d\u0456\u0439","\u043e\u0441\u0442\u0430\u043d\u043d\u044f","\u043e\u0441\u0442\u0430\u043d\u043d\u044e"],fn:function(e,a){var t=e.split(" ")[1];if(!t){var n=$.a.keys(Ie(a));if(0==n.length)return;var r=n[n.length-1];return void Ue.push("".concat("/kanban-ui","/board/").concat(r))}t=t.toLowerCase(),(r=$.a.findLastKey(Ie(a),function(e){return(e.name||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)}))&&Ue.push("".concat("/kanban-ui","/board/").concat(r))}},open:{commands:["open","\u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0438"],fn:function(e,a){var t=e.split(" ")[1];if(!t)return;t=t.toLowerCase();var n=$.a.findKey(Ie(a),function(e){return(e.name||"").toLowerCase().includes(t)||(e.description||"").toLowerCase().includes(t)});n&&Ue.push("".concat("/kanban-ui","/board/").concat(n))}}},scroll:Te,zoom:Le},Ve=function(){return ce(),{type:"SPEECH_ON"}},Ke=function(){return ie(),{type:"SPEECH_OFF"}},Ye=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).onSpeechOnClick=function(){t.props.speechOn()},t.onSpeechOffClick=function(){t.props.speechOff()},t.getButtonStyle=function(){var e=t.props.home?"btn-info":"btn-success";return t.props.isEnabled&&t.props.isOn&&(t.props.isError?e="btn-danger":t.props.executed||(e="btn-warning")),"btn btn-sm "+e},t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{disabled:!this.props.isEnabled,className:this.getButtonStyle(),onClick:function(){return e.props.isOn?e.onSpeechOffClick():e.onSpeechOnClick()},title:"".concat(this.props.lang,":").concat(this.props.cmd)},r.a.createElement("i",{className:this.props.isOn?"fa fa-fw fa-microphone-slash":"fa fa-fw fa-microphone"})))}}]),a}(r.a.Component),qe=Object(c.b)(function(e){return{isEnabled:e.speech.isSpeechEnabled,isOn:e.speech.isSpeechOn,isError:e.speech.isSpeechError,cmd:e.speech.speechCmd,executed:e.speech.speechResult,lang:e.speech.speechLang}},{speechOn:Ve,speechOff:Ke})(Ye),Je=Object(c.b)(function(e){return{secure:e.auth.isSignedIn,owner:e.auth.user,visible:null==e.activeBoard}},{createBoard:j,filterBoards:k})(function(e){var a,t=e.secure,n=e.owner,o=e.visible,c=e.createBoard,i=e.filterBoards;return r.a.createElement("nav",{className:"navbar bg-dark navbar-dark fixed-top",style:{visibility:o?"visible":"hidden"}},r.a.createElement("div",{className:"container-fluid no-gutters"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-6 col-lg-3 ml-auto mr-auto"},r.a.createElement("form",{className:"input-group",onSubmit:function(e){e.preventDefault()}},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement(ke,{getToken:function(){return a.value.trim()},clearValue:function(){return a.value=""}})),r.a.createElement(qe,{home:!0}),r.a.createElement("input",{type:"search",className:"form-control form-control-sm",placeholder:t?"Board title...":"Token...",ref:function(e){return a=e}}),t?r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-info btn-sm",onClick:function(e){a.value.trim()&&(console.log(t,n),c(a.value,t?n:"anonymous"),a.value="")}},r.a.createElement("i",{className:"fa fa-fw fa-check"}))):null,r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-info btn-sm",onClick:function(e){i(a.value.trim())}},r.a.createElement("i",{className:"fa fa-fw fa-search"}))))))))}),Ge=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(s.a)(this,Object(d.a)(a).call(this,e,t))).handleShow=n.handleShow.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.state={show:!1,title:"Confirm",question:"Are you sure?",yesFn:n.handleClose},n}return Object(p.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){Oe(JSON.stringify({id:""}))}},{key:"handleClose",value:function(e){e&&"function"==typeof e&&e(),this.setState({show:!1})}},{key:"handleShow",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Confirm",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Are you sure?",n=arguments.length>2?arguments[2]:void 0;this.setState({show:!0,title:a,question:t,yesFn:function(){return e.handleClose(n)}})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,null),r.a.createElement(L,{onConfirm:this.handleShow}),r.a.createElement(D.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,this.state.title)),r.a.createElement(D.a.Body,null,this.state.question),r.a.createElement(D.a.Footer,null,r.a.createElement(R.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(R.a,{variant:"primary",onClick:this.state.yesFn},"Yes"))))}}]),a}(r.a.Component),Xe=t(143),$e=t(142),Qe=function(e){var a=e.card;return r.a.createElement("div",{className:"card-body py-2",style:{overflowY:"auto"}},r.a.createElement("div",{className:"card-body-wrapper"},r.a.createElement($e.a,Object.assign({key:a.id},{id:a.id,description:a.description}))))},Ze=t(308),ea=t(306),aa=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(s.a)(this,Object(d.a)(a).call(this,e,t))).renderInput=function(e){var a=e.input,t=e.label,o=e.meta,c="field ".concat(o.error&&o.touched?"error":"");return r.a.createElement("div",{className:c},r.a.createElement("label",null,t),r.a.createElement("input",Object.assign({},a,{autoComplete:"off"})),n.renderError(o))},n.onSubmit=function(e){n.props.onSubmit(e)},n.handleShow=n.handleShow.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.state={show:!!e.visible,title:"Card",yesFn:n.handleClose},n}return Object(p.a)(a,e),Object(l.a)(a,[{key:"handleClose",value:function(e){e&&"function"==typeof e&&e(),this.setState({show:!1})}},{key:"handleShow",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Card",t=arguments.length>1?arguments[1]:void 0;this.setState({show:!0,title:a,yesFn:function(){return e.handleClose(t)}})}},{key:"componentDidUpdate",value:function(e){this.props.visible!==e.visible&&this.setState({show:!!this.props.visible})}},{key:"renderError",value:function(e){var a=e.error;if(e.touched&&a)return r.a.createElement("div",{className:"ui error message"},r.a.createElement("div",{className:"header"},a))}},{key:"render",value:function(){return r.a.createElement(D.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit)},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,this.state.title)),r.a.createElement(D.a.Body,null,r.a.createElement(Ze.a,{name:"name",component:this.renderInput,label:"Enter Title"}),r.a.createElement(Ze.a,{name:"description",component:this.renderInput,label:"Enter Description"})),r.a.createElement(D.a.Footer,null,r.a.createElement(R.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(R.a,{variant:"primary",onClick:this.state.yesFn},"Yes"))))}}]),a}(r.a.Component),ta=(Object(ea.a)({form:"cardForm",validate:function(e){var a={};return e.name||(a.name="You must enter a name"),e.description||(a.description="You must enter a description"),a}})(aa),function(e){var a=e.lane,t=e.card,o=(e.editCard,e.deleteCard),c=e.editable,i=(e.children,Object(n.useState)(!1)),l=Object(Xe.a)(i,2),s=(l[0],l[1]);return r.a.createElement("div",{id:t.id,className:"card-wrapper float-left m-3",draggable:c?"true":"false",onDragStart:function(e){e.dataTransfer.setData("card",t.id),e.dataTransfer.setData("parent",a.id)}},r.a.createElement("div",{className:"card shadow item"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title mb-0"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"mr-auto"},t.name),r.a.createElement("div",{className:"hover-card-badges",style:{display:c?"inline":"none"}},r.a.createElement("i",{className:"fa fa-fw fa-pencil text-muted card-badge",title:"edit",onClick:function(){return console.log("setting form visible"),void s(!0)}}),r.a.createElement("i",{className:"fa fa-fw fa-trash text-muted card-badge",title:"delete",onClick:function(){return o(t.id)}}))))),r.a.createElement(Qe,{card:t})))}),na=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).createCard=function(){var e=t.props,a=e.lane,n=e.board,r=e.createCard;e.editable&&a&&r&&r(n.id,a.id,"Card")},t.moveCard=function(e,a){var n=t.props,r=n.lane,o=n.board,c=n.moveCard;n.editable&&r&&c&&c(o.id,a,r.id,e)},t.editCard=function(e){var a=t.props,n=a.board,r=a.editable,o=a.onConfirm;if(r){var c=n.cards[e];o(void 0,"Edit ".concat(c.name,"?"))}},t.deleteCard=function(e){var a=t.props,n=a.lane,r=a.board,o=a.excludeAndDeleteCard,c=a.editable,i=a.onConfirm;if(c&&n&&o){var l=r.cards[e];i(void 0,"Delete ".concat(l.name,"?"),function(){return o(r.id,n.id,e)})}},t.deleteLane=function(){var e=t.props,a=e.lane,n=e.board,r=e.excludeAndDeleteLane,o=e.parentId,c=e.editable,i=e.onConfirm;c&&a&&r&&i(void 0,"Delete ".concat(a.name,"?"),function(){return r(n.id,o,a.id)})},t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"renderCards",value:function(){var e=this,a=this.props,t=a.lane,n=a.board,o=a.editable;return t&&t.children?t.children.map(function(e){return n.cards[e]}).filter(function(e){return e}).map(function(a){return r.a.createElement(ta,{key:a.id,board:n,card:a,lane:t,editCard:e.editCard,deleteCard:e.deleteCard,editable:o})}):null}},{key:"render",value:function(){var e=this,a=this.props,t=a.lane,n=a.editable,o=t.name+(t.description?":":"");return r.a.createElement("div",{id:t.id,className:"lane-wrapper"},r.a.createElement("div",{className:"lane-header card-header border rounded-0"},r.a.createElement("div",{className:"lane-title mb-0"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"mr-auto"},r.a.createElement("b",null,o)," ",t.description),r.a.createElement("div",{className:"hover-card-badges",style:{display:n?"inline":"none"}},r.a.createElement("i",{className:"fa fa-fw fa-file text-muted",title:"card",onClick:this.createCard}),r.a.createElement("i",{className:"fa fa-fw fa-pencil text-muted",title:"edit"}),r.a.createElement("i",{className:"fa fa-fw fa-trash text-muted",title:"delete",onClick:this.deleteLane}))))),r.a.createElement("div",{className:"lane-body",onDragOver:function(e){e.dataTransfer.types.includes("card")&&e.preventDefault()},onDrop:function(a){a.preventDefault();var t=a.dataTransfer.getData("card"),n=a.dataTransfer.getData("parent");e.moveCard(t,n)}},this.renderCards()))}}]),a}(r.a.Component),ra=Object(c.b)(function(e,a){var t=e.board;return{board:t,lane:t.lanes[a.lane.id]}},{createCard:function(e,a,t){return function(){var n=Object(C.a)(w.a.mark(function n(r){var o;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O.post("/v1/api/board/".concat(e,"/cards"),{name:t});case 2:o=n.sent,r({type:"CREATE_CARD",payload:o.data}),_(e,[{id:o.data.id,board_id:e,type:5,payload:{parent_id:a}}]);case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},moveCard:function(e,a,t,n){return function(){var r=Object(C.a)(w.a.mark(function r(o){return w.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o({type:"EXCLUDE_CARD",payload:{boardId:e,laneId:a,cardId:n}}),o({type:"APPEND_CARD",payload:{boardId:e,laneId:t,cardId:n}}),_(e,[{id:n,board_id:e,type:4,payload:{parent_id:a}},{id:n,board_id:e,type:5,payload:{parent_id:t}}]);case 4:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()},excludeAndDeleteCard:function(e,a,t){return function(n){_(e,[{id:t,board_id:e,type:4,payload:{parent_id:a}},{id:t,board_id:e,type:1,payload:{parent_id:a}}]),n({type:"EXCLUDE_CARD",payload:{boardId:e,laneId:a,cardId:t}}),n({type:"DELETE_CARD",payload:{boardId:e,cardId:t}})}},excludeAndDeleteLane:P})(na),oa=function(e){function a(){var e,t;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(s.a)(this,(e=Object(d.a)(a)).call.apply(e,[this].concat(r)))).createChild=function(){var e=t.props,a=e.lane,n=e.board,r=e.createCardLane;e.editable&&a&&r&&r(n.id,a.id,"CardLane")},t.deleteLane=function(){var e=t.props,a=e.lane,n=e.board,r=e.excludeAndDeleteLane,o=e.parentId,c=e.editable,i=e.onConfirm;c&&a&&r&&i(void 0,"Delete ".concat(a.name,"?"),function(){return r(n.id,o,a.id)})},t}return Object(p.a)(a,e),Object(l.a)(a,[{key:"renderLanes",value:function(){var e=this.props,a=e.lane,t=e.board,n=e.editable,o=e.onConfirm;return a&&a.children?a.children.map(function(e){return t.lanes[e]}).filter(function(e){return e}).map(function(e){return r.a.createElement(ia,{key:e.id,lane:e,board:t,parentId:a.id,editable:n,onConfirm:o})}):null}},{key:"render",value:function(){var e=this.props,a=e.lane,t=e.editable,n=a.name+(a.description?":":""),o="V"===(a&&a.layout||"V")?"flex-column":"flex-row";return r.a.createElement("div",{id:a.id,className:"lane-wrapper composite-lane flex-fill"},r.a.createElement("div",{className:"lane-header card-header border rounded-0"},r.a.createElement("div",{className:"lane-title mb-0"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"mr-auto"},r.a.createElement("b",null,n)," ",a.description),r.a.createElement("div",{className:"hover-card-badges",style:{display:t?"inline":"none"}},r.a.createElement("i",{className:"fa fa-fw fa-file text-muted",title:"lane",onClick:this.createChild}),r.a.createElement("i",{className:"fa fa-fw fa-pencil text-muted",title:"edit"}),r.a.createElement("i",{className:"fa fa-fw fa-trash text-muted",title:"delete",onClick:this.deleteLane}))))),r.a.createElement("div",{className:"lane-body d-flex ".concat(o)},this.renderLanes()))}}]),a}(r.a.Component),ca=Object(c.b)(function(e,a){var t=e.board;return{board:t,lane:t.lanes[a.lane.id]}},{createLane:H,createCardLane:F,excludeAndDeleteLane:P})(oa),ia=function(e){var a=e.lane,t=e.board,n=e.parentId,o=e.editable,c=e.onConfirm;return"C"===a.type?r.a.createElement(ra,{key:a.id,lane:a,board:t,parentId:n,editable:o,onConfirm:c}):r.a.createElement(ca,{key:a.id,lane:a,board:t,parentId:n,editable:o,onConfirm:c})},la=function(e){function a(){return Object(i.a)(this,a),Object(s.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(p.a)(a,e),Object(l.a)(a,[{key:"renderLanes",value:function(){var e=this.props,a=e.board,t=e.editable,n=e.onConfirm;return a&&a.children?a.children.map(function(e){return a.lanes[e]}).filter(function(e){return e}).map(function(e){return r.a.createElement(ia,{key:e.id,lane:e,board:a,parentId:a.id,editable:t,onConfirm:n})}):null}},{key:"render",value:function(){var e=this.props.board,a="V"===(e&&e.layout||"V")?"flex-column":"flex-row";return r.a.createElement("div",{className:"container-fluid board-list"},r.a.createElement("div",{className:"board-body d-flex ".concat(a)},this.renderLanes()))}}]),a}(r.a.Component),sa=Object(c.b)(function(e,a){return{board:e.board}})(la),da=Object(c.b)(function(e,a){var t=e.board&&e.activeBoard&&e.board.id===e.activeBoard?e.board:null;return{board:t,editable:e.auth.isSignedIn&&t&&t.owner===e.auth.user,visible:null!=e.activeBoard}},{update:S,layout:I,lane:H})(function(e){var a,t=e.editable,n=e.update,o=e.visible,c=e.layout,i=e.lane,l=e.board;return r.a.createElement("nav",{className:"navbar bg-dark navbar-dark fixed-top",style:{visibility:o?"visible":"hidden"}},r.a.createElement("div",{className:"container-fluid no-gutters"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 col-lg-3 ml-auto"},r.a.createElement("form",{className:"input-group ml-auto mr-auto",onSubmit:function(e){e.preventDefault()}},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement(m.a,{to:"".concat("/kanban-ui","/"),className:"btn btn-success btn-sm"},r.a.createElement("i",{className:"fa fa-fw fa-home"}))),r.a.createElement(qe,{home:!1}),r.a.createElement("input",{type:"search",className:"form-control form-control-sm",defaultValue:l?l.name:"",ref:function(e){return a=e}}),t?r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-success btn-sm",onClick:function(e){a.value.trim()&&n(l.id,a.value)}},r.a.createElement("i",{className:"fa fa-fw fa-check"}))):null))),r.a.createElement("div",{className:"mr-auto"},t?r.a.createElement("button",{className:"btn btn-sm text-white",onClick:function(e){i(l.id,"Lane")}},r.a.createElement("i",{className:"fa fa-fw fa-file"})):null,r.a.createElement("button",{className:"btn btn-sm text-white"},r.a.createElement("i",{className:"fa fa-fw fa-filter"})),function(){if(!t)return null;var e="V"===l.layout?"fa-table":"fa-columns";return r.a.createElement("button",{className:"btn btn-sm text-white",onClick:function(e){c(l.id,"V"===l.layout?"H":"V")}},r.a.createElement("i",{className:"fa fa-fw ".concat(e)}))}(),r.a.createElement("button",{className:"btn btn-sm text-white"},r.a.createElement("i",{className:"fa fa-fw fa-gear"})),r.a.createElement("button",{className:"btn btn-sm text-white"},r.a.createElement("i",{className:"fa fa-fw fa-refresh"})))))}),ua=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(s.a)(this,Object(d.a)(a).call(this,e,t))).handleShow=n.handleShow.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.state={show:!1,title:"Confirm",question:"Are you sure?",yesFn:n.handleClose},n}return Object(p.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id,a=this.props,t=a.fetchBoard,n=a.activeBoard;t(e),n(e),Oe(JSON.stringify({id:e}))}},{key:"componentWillUnmount",value:function(){(0,this.props.cleanBoard)()}},{key:"handleClose",value:function(e){e&&"function"==typeof e&&e(),this.setState({show:!1})}},{key:"handleShow",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Confirm",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Are you sure?",n=arguments.length>2?arguments[2]:void 0;this.setState({show:!0,title:a,question:t,yesFn:function(){return e.handleClose(n)}})}},{key:"render",value:function(){var e=this.props,a=e.board,t=e.editable;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(da,null),r.a.createElement(sa,{board:a,editable:t,onConfirm:this.handleShow}),r.a.createElement(D.a,{show:this.state.show,onHide:this.handleClose},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,this.state.title)),r.a.createElement(D.a.Body,null,this.state.question),r.a.createElement(D.a.Footer,null,r.a.createElement(R.a,{variant:"secondary",onClick:this.handleClose},"Close"),r.a.createElement(R.a,{variant:"primary",onClick:this.state.yesFn},"Yes")))):null}}]),a}(r.a.Component),pa=Object(c.b)(function(e,a){var t=e.board&&e.board.id===a.match.params.id?e.board:null;return{board:t,editable:e.auth.isSignedIn&&t&&t.owner===e.auth.user}},{fetchBoard:N,activeBoard:function(e){return{type:"ACTIVE_BOARD",payload:e}},cleanBoard:function(){return{type:"CLEAN_BOARD"}}})(ua),fa=t(42),ma=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(s.a)(this,Object(d.a)(a).call(this,e,t))).handleShow=n.handleShow.bind(Object(u.a)(n)),n.handleClose=n.handleClose.bind(Object(u.a)(n)),n.state={show:!1,title:"",info:""},n}return Object(p.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,a=function(a,t,n){return!e.state.show&&e.handleShow(a,t,n)},t=function(){return e.state.show&&e.handleClose()};this.speechHandle=function(e){if(!e)return-1;var a="cb_".concat(++ae);return te[a]=e,a}(function(n,r){n?function(n){e.props.speechCmd(n,e.props,a,t)}(r):e.props.speechError()}),console.log("sub: "+this.speechHandle)}},{key:"componentWillUnmount",value:function(){var e;console.log("unsub: "+this.speechHandle),e=this.speechHandle,te[e]&&delete te[e]}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.setState({show:!0,title:e,info:a,yesFn:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(D.a,{show:this.state.show,onHide:this.handleClose,size:"lg"},r.a.createElement(D.a.Header,{closeButton:!0},r.a.createElement(D.a.Title,null,this.state.title)),r.a.createElement(D.a.Body,null,r.a.createElement("div",null,this.state.info)),r.a.createElement(D.a.Footer,null,r.a.createElement(R.a,{variant:"secondary",onClick:this.handleClose},"Close"),this.state.yesFn?r.a.createElement(R.a,{variant:"primary",onClick:function(){return e.state.yesFn()},disabled:!this.state.yesFn},"Yes"):""))}}]),a}(r.a.Component),ha=Object(c.b)(function(e){return{isEnabled:e.speech.isSpeechEnabled,isOn:e.speech.isSpeechOn,cmd:e.speech.speechCmd,lang:e.speech.speechLang,filter:e.filter,boards:e.boards,owner:e.auth.user,activeBoardId:e.activeBoard}},{speechOn:Ve,speechOff:Ke,speechError:function(){return{type:"SPEECH_ERROR"}},speechCmd:function(e,a,t,n){var r=function(e,a){var t=$.a.flatMap(We,function(e){return $.a.map(e,function(e){return e})});return $.a.find(t,function(t){return $.a.includes(t.commands,e)&&je(t,e,a)})||$.a.find(t,function(t){return $.a.some(t.commands,function(a){return e.startsWith(a)})&&je(t,e,a)})}(e=e.toLowerCase(),a);return r?(console.log("found: "+e),r.fn(e,a,t,n)):console.log("not found: "+e),{type:"SPEECH_CMD",payload:{cmd:e,executed:null!=r}}},speechLang:function(e){return function(e){if(console.log("Language:"+e),ne!==e){localStorage.setItem("speech.lang",e),ne=e;var a=te;ie(),setTimeout(function(){te=a,ce()},2e3)}}(e),{type:"SPEECH_LANG",payload:e}},filterBoards:k,createBoard:j,deleteBoard:A,shareBoard:B,renameBoard:S,layoutBoard:I,createLane:H,createCardLane:F,layoutLane:function(e,a,t){return function(){var n=Object(C.a)(w.a.mark(function n(r){return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:_(e,[{id:a,board_id:e,type:9,payload:{layout:t}}]),r({type:"LAYOUT_LANE",payload:{boardId:e,laneId:a,layout:t}});case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()}})(ma),ba=function(){return r.a.createElement(fa.b,{history:Ue},r.a.createElement(r.a.Fragment,null,r.a.createElement(ha,null),r.a.createElement(fa.c,null,r.a.createElement(fa.a,{path:"".concat("/kanban-ui","/"),exact:!0,component:Ge}),r.a.createElement(fa.a,{path:"".concat("/kanban-ui","/board/:id"),exact:!0,component:pa}))))};t(303),t(304);Object(o.render)(r.a.createElement(c.a,{store:de},r.a.createElement(ba,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[146,1,2]]]);
//# sourceMappingURL=main.76c294fe.chunk.js.map