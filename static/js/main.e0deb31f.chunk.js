(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(29)},25:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(10),i=n(2),a="dmitrybodnar.com",u="http".concat("s","://").concat(a),l="ws".concat("s","://").concat(a);n(25),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(27);var d,s=function(e){return{type:"ADD_TODO_STARTED",text:e}},f=function(e,t){return{type:"ADD_TODO_SUCCESS",id:e,text:t}},m=function(e){return{type:"ADD_TODO_FAILURE",error:e}},p=function(e){return{type:"REMOVE_TODO_STARTED",id:e}},E=function(e){return{type:"REMOVE_TODO_SUCCESS",id:e}},v=function(e,t){return{type:"REMOVE_TODO_FAILURE",id:e,error:t}},O="SHOW_ALL",h="SHOW_COMPLETED",g="SHOW_ACTIVE",T=function(e){var t=e.active,n=e.children,o=e.onClick;return r.a.createElement("button",{onClick:o,disabled:t,style:{marginLeft:"4px"}},n)},b=Object(i.b)(function(e,t){return{active:t.filter===e.visibilityFilter}},function(e,t){return{onClick:function(){return e({type:"SET_VISIBILITY_FILTER",filter:t.filter})}}})(T),D=function(){return r.a.createElement("div",null,r.a.createElement("span",null,"Show: "),r.a.createElement(b,{filter:O},"All"),r.a.createElement(b,{filter:g},"Active"),r.a.createElement(b,{filter:h},"Completed"))},_=Object(i.b)()(function(e){var t,n=e.dispatch;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){var o;e.preventDefault(),t.value.trim()&&(n((o=t.value,function(e){e(s(o)),fetch("".concat(u,"/v1/api/board"),{method:"post",body:JSON.stringify({name:o})}).then(function(e){return e.json()}).then(function(t){e(f(t.id,o))}).catch(function(t){e(m(t.message))})})),t.value="")}},r.a.createElement("input",{ref:function(e){return t=e}}),r.a.createElement("button",{type:"submit"},"Add Todo")))}),w=function(e){var t=e.onClick,n=e.completed,o=e.text;return r.a.createElement("li",{onClick:t,style:{textDecoration:n?"line-through":"none"}},o)},S=function(e){var t=e.todos,n=(e.toggleTodo,e.removeTodo);return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement(w,Object.assign({key:e.id},e,{onClick:function(){return n(e.id)}}))}))},y=function(e,t){switch(t){case O:return e;case h:return e.filter(function(e){return e.completed});case g:return e.filter(function(e){return!e.completed});default:throw new Error("Unknown filter: "+t)}},k=Object(i.b)(function(e){return{todos:y(e.todos,e.visibilityFilter)}},function(e){return{toggleTodo:function(t){return e(function(e){return{type:"TOGGLE_TODO",id:e}}(t))},removeTodo:function(t){return e(function(e){return function(t){t(p(e)),fetch("".concat(u,"/v1/api/board/").concat(e),{method:"delete"}).then(function(n){t(E(e))}).catch(function(n){t(v(e,n.message))})}}(t))}}})(S),A=function(){return r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(k,null),r.a.createElement(D,null))},C=n(1),R=n(12),I=n(13),L=function(e){return function(t,n,o){return e(function(e,n){var o,r=performance.now(),c=t(e,n),i=performance.now(),a=(o=i-r,Math.round(100*o)/100);return console.log("reducer process time:",a),c},n,o)}},j=function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var o=t(n);return console.log("next state",e.getState()),console.groupEnd(),o}}},x=n(15),M=n(14),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO_STARTED":return e;case"ADD_TODO_SUCCESS":return[].concat(Object(M.a)(e),[{id:t.id,text:t.text,completed:!1}]);case"ADD_TODO_FAILURE":case"REMOVE_TODO_STARTED":return e;case"REMOVE_TODO_SUCCESS":return e.filter(function(e){return e.id!==t.id});case"REMOVE_TODO_FAILURE":return e;case"TOGGLE_TODO":return e.map(function(e){return e.id===t.id?Object(x.a)({},e,{completed:!e.completed}):e});default:return e}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VISIBILITY_FILTER":return t.filter;default:return e}},V=Object(C.combineReducers)({todos:F,visibilityFilter:U});fetch("".concat(u,"/v1/api/board")).then(function(e){return e.json()}).then(function(e){var t={todos:e.map(function(e){return{id:e.id,text:e.name,completed:!1}})};(d=function(e){var t=[j,R.a],n=[C.applyMiddleware.apply(void 0,t),L],o=I.composeWithDevTools.apply(void 0,n);return Object(C.createStore)(V,e,o)}(t)).subscribe(G),Object(c.render)(r.a.createElement(i.a,{store:d},r.a.createElement(A,null)),document.getElementById("root"))});var W=[],B=null;function G(){var e=W;if((W=d.getState().todos).length>e.length){!function(e){if(console.log("post commands: ",e),!B)return void console.log("shared worker is not available");console.log("commands posted to shared worker"),B.port.postMessage(e)}([{id:"5c3016bc4d74f1000177ed11",type:5,payload:{lane_id:"5c30169d4d74f1000177ed10"}}])}}!function(){var e=new WebSocket("".concat(l,"/v1/api/notify/ws"));e.onclose=function(e){console.log("Connection closed")},e.onmessage=function(e){console.log("notification received",e.data)}}(),window.SharedWorker&&((B=new SharedWorker("worker.js")).port.start(),console.log("shared worker is started"),B.port.addEventListener("message",function(e){console.log("message received by main is..."),console.log(e.data)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,2,1]]]);
//# sourceMappingURL=main.e0deb31f.chunk.js.map