{"version":3,"sources":["components/board/card/Desc.js","components/board/card/Key.js","components/board/card/Value.js","components/board/card/Prop.js","serviceWorker.js","components/boards/Desc.js","components/Spinner4.js","components/ProgressBar.js","components/boards/Item.js","apis/index.js","apis/worker.js","actions/board.js","actions/types.js","components/boards/List.js","actions/lane.js","actions/card.js","enhancers/monitorReducer.js","middleware/logger.js","reducers/authReducer.js","reducers/index.js","reducers/boardsReducer.js","reducers/boardReducer.js","reducers/filterReducer.js","reducers/activeBoardReducer.js","store.js","apis/socket.js","components/Boards.js","components/board/Header.js","components/board/card/Body.js","components/board/card/Form.js","components/board/Card.js","components/board/CardLane.js","components/board/CompositeLane.js","components/board/Lane.js","components/board/Body.js","components/Board.js","components/GoogleAuth.js","actions/auth.js","components/Header.js","history.js","components/App.js","index.js"],"names":["react__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0___default","n","_Prop__WEBPACK_IMPORTED_MODULE_1__","IsJsArray","text","length","startsWith","endsWith","ParseJsArray","eval","error","__webpack_exports__","_ref","id","body","description","map","i","idx","a","createElement","Object","assign","key","concat","_key","value","className","Key","style","react_default","Value","Boolean","window","location","hostname","match","Desc","includes","split","filter","s","p","Spinner4","visible","display","position","bottom","right","ProgressBar","props","bgcolor","completed","fillerStyles","height","width","backgroundColor","borderRadius","textAlign","transition","padding","margin","color","fontWeight","fontSize","Item","name","state","shared","editable","shareBoard","deleteBoard","react_router_dom","textDecoration","to","process","title","onClick","left","axios","create","baseURL","worker","boardId","commands","console","log","server","post","fetchBoard","_ref2","asyncToGenerator","regenerator_default","mark","_callee2","dispatch","response","wrap","_context2","prev","next","get","sent","type","payload","data","stop","_x2","apply","this","arguments","notification","_ref7","_callee7","_context7","delete","_x7","List","_this$props","_this","onConfirm","undefined","_this$props2","fetchBoards","currentUserId","prevProps","_this$props3","_this2","boards","board","boards_Item","objectSpread","isSignedIn","owner","React","Component","connect","values","toLowerCase","auth","userProfile","_callee","_context","t0","_x","_ref6","_callee6","_context6","put","_x6","fetchLane","laneId","createLane","layout","board_id","parent_id","deleteLane","parentId","excludeAndDeleteLane","fetchCard","cardId","deleteCard","monitorReducer","createStore","reducer","initialState","enhancer","action","number","start","performance","now","newState","end","diff","Math","round","logger","store","group","info","result","getState","groupEnd","INTIAL_STATE","combineReducers","_","mapKeys","defineProperty","omit","lane","lanes","cards","walkFn","el","visitFn","forEach","children","push","formatBoard","pull","form","formReducer","activeBoard","configureStore","middlewares","loggerMiddleware","thunkMiddleware","enhancers","applyMiddleware","monitorReducerEnhancer","composedEnhancers","composeWithDevTools","rootReducer","REFRESHCARDNOTIFICATION","REFRESHLANENOTIFICATION","REFRESHBOARDNOTIFICATION","REMOVECARDNOTIFICATION","REMOVELANENOTIFICATION","REMOVEBOARDNOTIFICATION","CREATECARDNOTIFICATION","CREATELANENOTIFICATION","CREATEBOARDNOTIFICATION","socket","sendMessage","ws","msg","JSON","parse","send","processNotification","apis_socket","conn","WebSocket","onopen","evt","onclose","onmessage","ns","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","createSocket","Boards","context","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleShow","bind","assertThisInitialized","handleClose","show","question","yesFn","stringify","fn","setState","Fragment","boards_List","Modal","onHide","Header","closeButton","Title","Body","Footer","Button","variant","update","_ref5","_callee5","_context5","_x5","_ref4","_callee4","_context4","_x4","input","onSubmit","e","preventDefault","defaultValue","ref","node","trim","layoutIcon","layoutButton","card_Body","card","overflowY","card_Desc","Form","renderInput","label","meta","touched","autoComplete","renderError","formValues","handleSubmit","Field","component","reduxForm","validate","errors","Card","editCard","_useState","useState","_useState2","slicedToArray","formVisibility","setFormVisibility","draggable","onDragStart","dataTransfer","setData","card_Form","initialValues","CardLane","createCard","moveCard","fromLaneId","_this$props4","excludeAndDeleteCard","_this$props5","_this$props6","_this3","_this$props7","onDragOver","types","onDrop","getData","renderCards","ownProps","toLaneId","_ref3","_callee3","_context3","_x3","CompositeLane","createChild","createCardLane","child","Lane","renderLanes","board_CardLane","board_CompositeLane","Board","params","cleanBoard","board_Header","board_Body","GoogleAuth","onAuthChange","profile","currentUser","getBasicProfile","getId","email","getEmail","getName","signIn","signOut","onSignInClick","onSignOutClick","gapi","load","client","init","clientId","scope","then","auth2","getAuthInstance","listen","userId","secure","createBoard","filterBoards","visibility","components_GoogleAuth","placeholder","createHistory","App","react_router","history","components_Header","path","exact","render","es","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.34d426e6.chunk.js","sourcesContent":["import React from 'react';\r\nimport Prop from './Prop';\r\n\r\nexport default ({id, description}) => {\r\n let body = description || '';\r\n if (IsJsArray(body)){\r\n   const arr = ParseJsArray(body);\r\n   body = arr.map((i, idx) => (<Prop key={`${id}_${idx}`} {...{id:`${id}_${idx}`, _key:i.key, value:i.value}}/>));\r\n }\r\n  return <div className=\"card-text small text-justify\">{body}</div>\r\n};\r\n\r\nfunction IsJsArray(text){\r\n  text = text || \"\";\r\n  return text.length > 1 && text.startsWith(\"[\") && text.endsWith(\"]\");\r\n}\r\n\r\nfunction ParseJsArray(text){\r\n  try {\r\n    return eval(text);\r\n  } catch (error) {\r\n    return [];\r\n  }\r\n}\r\n\r\n","import React from 'react';\r\n\r\nexport default ({id, text, style}) => {\r\n  text = text || \"\";\r\n  if (text.length > 0) text += \":\";\r\n  style = style || {};\r\n  return (\r\n    <div className=\"label\" style={style}>{text}</div>\r\n  ); \r\n};\r\n","import React from 'react';\r\n\r\nexport default ({id, text, style}) => {\r\n  text = text || \"\";\r\n  style = style || {};\r\n  return (\r\n    <div className=\"value\" style={style}>{text}</div>\r\n  ); \r\n};\r\n","import React from 'react';\r\nimport Key from './Key';\r\nimport Value from './Value';\r\n\r\nexport default ({id, _key, value}) => {\r\n  _key = _key || {};\r\n  _key.id = `${id}_key`;\r\n  value = value || {};\r\n  value.id = `${id}_value`;\r\n  return (\r\n    <div className=\"desc-container\">\r\n      <Key {...{id: `${_key.id}_body`, text: _key.text, style: _key.style}}/>\r\n      <Value {...{id: `${value.id}_body`, text: value.text, style: value.style}}/>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\r\n\r\nexport default ({id, description}) => {\r\n  var text = description || '';\r\n  if (!text.includes(':')){\r\n    return text;\r\n  }\r\n  var body = text \r\n  .split(\";\").filter(s => s != null && s.length > 0)\r\n  .map(s => s.split(':'))\r\n  .map((p, idx) => (<div key={`${id}_${idx}`} className=\"desc-container\"><div className=\"label\">{p[0]}:</div><div className=\"value\">{p[1]}</div></div>));\r\n\r\n  return <div className=\"card-text small text-justify\">{body}</div>\r\n};\r\n","import React from 'react';\r\n\r\nexport default ({visible}) => {\r\n  return <div className=\"lds-hourglass\" style={{ display: visible ? 'inline-block' : 'none', position: 'absolute', bottom: 0, right: 0 }}></div>\r\n};\r\n","import React from 'react';\r\n\r\nexport default (props) => {\r\n  const { bgcolor, completed } = props;\r\n\r\n  const containerStyles = {\r\n    height: 5,\r\n    width: '100%',\r\n    backgroundColor: \"transparent\",\r\n    borderRadius: '0.2rem',\r\n    padding: 0,\r\n    margin: 0\r\n  }\r\n\r\n  const fillerStyles = {\r\n    height: '100%',\r\n    width: `${completed}%`,\r\n    backgroundColor: bgcolor,\r\n    borderRadius: 'inherit',\r\n    textAlign: 'right',\r\n    transition: 'width 1s ease-in-out',\r\n    padding: 0,\r\n    margin: 0\r\n  }\r\n\r\n  const labelStyles = {\r\n    display: 'none',\r\n    padding: 0,\r\n    margin: 0,\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n    fontSize: 'xx-small'\r\n  }\r\n\r\n  return (\r\n    <div style={containerStyles}>\r\n      <div style={fillerStyles}>\r\n        <span style={labelStyles}>{`${completed}%`}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport Desc from './Desc';\r\nimport Spinner4 from '../Spinner4';\r\nimport ProgressBar from '../ProgressBar';\r\n\r\nconst Item = ({ id, name, description, state, shared, editable, shareBoard, deleteBoard }) => (\r\n  <div id={`${id}`} className=\"card-wrapper float-left m-3\">\r\n    <div className=\"card shadow board\">\r\n      <div className=\"card-header\">\r\n        <div className=\"card-title mb-0\">\r\n          <div className=\"row mx-0\">\r\n            <div className=\"mr-auto\">\r\n              <Link\r\n                className=\"text-info\"\r\n                style={{ textDecoration: 'none', fontWeight: '500' }}\r\n                to={`${process.env.REACT_APP_CONTEXT_ROOT}/board/${id}`}\r\n              >\r\n                {name}\r\n              </Link>\r\n            </div>\r\n            <div\r\n              className=\"hover-card-badges\"\r\n              style={{ display: editable ? 'inline' : 'none' }}\r\n            >\r\n              <i className=\"fa fa-fw fa-pencil text-muted\" title=\"edit\" />\r\n              <i\r\n                className=\"fa fa-fw fa-eye text-muted\"\r\n                title=\"public\"\r\n                style={{ display: shared ? 'inline' : 'none' }}\r\n                onClick={() => shareBoard(id, false)}\r\n              />\r\n              <i\r\n                className=\"fa fa-fw fa-eye-slash text-muted\"\r\n                title=\"private\"\r\n                style={{ display: shared ? 'none' : 'inline' }}\r\n                onClick={() => shareBoard(id, true)}\r\n              />\r\n              <i\r\n                className=\"fa fa-fw fa-trash text-muted\"\r\n                title=\"delete\"\r\n                onClick={() => deleteBoard(id, name)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"card-body\">\r\n        <div className=\"board-body-wrapper\">\r\n          <Desc key={id} {...{id, description}}></Desc>\r\n        </div>\r\n        <Spinner4 id={`spinner-${id}`} key={id} {...{visible: state === 'loading' }}/>\r\n      </div>\r\n      <div style={{ display: (state || '').startsWith('progress') ? 'block' : 'none', position: 'absolute', bottom: 0, left: 0, width: '100%' }}>\r\n        <ProgressBar bgcolor={\"#17a2b8\"} completed={(state||'').split(':')[1] || 100}/>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nItem.propTypes = {\r\n  id: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired\r\n};\r\n\r\nexport default Item;\r\n","import axios from 'axios';\r\n\r\nexport default axios.create({\r\n  baseURL: process.env.REACT_APP_API_URL\r\n});","import server from './index';\r\n\r\nexport const UPDATECARD = 0;\r\nexport const REMOVECARD = 1;\r\nexport const UPDATELANE = 2;\r\nexport const REMOVELANE = 3;\r\nexport const EXCLUDECHILD = 4;\r\nexport const APPENDCHILD = 5;\r\nexport const INSERTBEFORE = 6;\r\nexport const INSERTAFTER = 7;\r\nexport const LAYOUTBOARD = 8;\r\n\r\nlet sharedWorker = null;\r\n\r\nif (false && window.SharedWorker) {\r\n  sharedWorker = new SharedWorker(`${process.env.REACT_APP_CONTEXT_ROOT}/worker.js`);\r\n  sharedWorker.port.start();\r\n\r\n  console.log('shared worker: started');\r\n\r\n  sharedWorker.port.addEventListener('message', event => {\r\n    console.log('main: message received from shared worker', event.data);\r\n  });\r\n}\r\n\r\nexport default (boardId, commands) => {\r\n  if (!sharedWorker) {\r\n    console.log('main: shared worker is not available');\r\n\r\n    server.post(`/v1/api/command/${boardId}`, commands);\r\n    \r\n    return;\r\n  }\r\n\r\n  console.log('main: post commands to shared worker', commands);\r\n\r\n  sharedWorker.port.postMessage({ boardId, commands });\r\n\r\n  console.log('main: commands posted to shared worker');\r\n};\r\n","import server from '../apis/index';\r\nimport worker, { LAYOUTBOARD } from '../apis/worker';\r\n\r\nimport {\r\n  CREATE_BOARD,\r\n  FILTER_BOARDS,\r\n  FETCH_BOARDS,\r\n  FETCH_BOARD,\r\n  CLEAN_BOARD,\r\n  ACTIVE_BOARD,\r\n  DELETE_BOARD,\r\n  RENAME_BOARD,\r\n  SHARE_BOARD,\r\n  LAYOUT_BOARD\r\n} from './types';\r\n\r\nexport const filterBoards = filter => ({\r\n  type: FILTER_BOARDS,\r\n  filter\r\n});\r\n\r\nexport const fetchBoards = owner => async dispatch => {\r\n  const response = owner\r\n    ? await server.get(`/v1/api/board?owner=${owner}`)\r\n    : await server.get('/v1/api/board');\r\n\r\n  dispatch({ type: FETCH_BOARDS, payload: response.data });\r\n};\r\n\r\nexport const fetchBoard = id => async dispatch => {\r\n  const response = await server.get(`/v1/api/board/${id}`);\r\n\r\n  dispatch({ type: FETCH_BOARD, payload: response.data });\r\n};\r\n\r\nexport const cleanBoard = () => ({ type: CLEAN_BOARD });\r\n\r\nexport const activeBoard = (id) => ({ type: ACTIVE_BOARD, payload: id });\r\n\r\nexport const createBoard = (name, owner) => async dispatch => {\r\n  const response = await server.post('/v1/api/board', {\r\n    name,\r\n    owner,\r\n    layout: 'H',\r\n    shared: false\r\n  });\r\n\r\n  dispatch({ type: CREATE_BOARD, payload: response.data });\r\n};\r\n\r\nexport const layoutBoard = (id, layout) => async dispatch => {\r\n  worker(id, [{ id, board_id: id, type: LAYOUTBOARD, payload: { layout } }]);\r\n\r\n  dispatch({ type: LAYOUT_BOARD, payload: layout });\r\n};\r\n\r\nexport const renameBoard = (id, name) => async dispatch => {\r\n  const response = await server.put(`/v1/api/board/${id}/rename`, { name });\r\n\r\n  dispatch({ type: RENAME_BOARD, payload: response.data });\r\n};\r\n\r\nexport const shareBoard = (id, shared) => async dispatch => {\r\n  const response = await server.put(`/v1/api/board/${id}/share`, { shared });\r\n\r\n  dispatch({ type: SHARE_BOARD, payload: response.data });\r\n};\r\n\r\nexport const deleteBoard = (id, notification) => async dispatch => {\r\n  if (!notification) {\r\n    await server.delete(`/v1/api/board/${id}`);\r\n  }\r\n\r\n  dispatch({ type: DELETE_BOARD, payload: id });\r\n};\r\n","export const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_OUT = 'SIGN_OUT';\r\n\r\nexport const FILTER_BOARDS = 'FILTER_BOARDS';\r\nexport const FETCH_BOARDS = 'FETCH_BOARDS';\r\nexport const CREATE_BOARD = 'CREATE_BOARD';\r\nexport const DELETE_BOARD = 'DELETE_BOARD';\r\nexport const RENAME_BOARD = 'RENAME_BOARD';\r\nexport const SHARE_BOARD = 'SHARE_BOARD';\r\n\r\nexport const FETCH_BOARD = 'FETCH_BOARD';\r\nexport const CLEAN_BOARD = 'CLEAN_BOARD';\r\nexport const ACTIVE_BOARD = 'ACTIVE_BOARD';\r\nexport const LAYOUT_BOARD = 'LAYOUT_BOARD';\r\n\r\nexport const FETCH_LANE = 'FETCH_LANE'\r\nexport const CREATE_LANE = 'CREATE_LANE';\r\nexport const APPEND_LANE = 'APPEND_LANE';\r\nexport const EXCLUDE_LANE = 'EXCLUDE_LANE';\r\nexport const DELETE_LANE = 'DELETE_LANE';\r\n\r\nexport const FETCH_CARD = 'FETCH_CARD'\r\nexport const CREATE_CARD = 'CREATE_CARD';\r\nexport const APPEND_CARD = 'APPEND_CARD';\r\nexport const EXCLUDE_CARD = 'EXCLUDE_CARD';\r\nexport const DELETE_CARD = 'DELETE_CARD';\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Item from './Item';\r\nimport {\r\n  fetchBoards,\r\n  shareBoard,\r\n  deleteBoard\r\n} from '../../actions/board';\r\n\r\nclass List extends React.Component {\r\n  componentDidMount() {\r\n    let { fetchBoards, currentUserId } = this.props;\r\n\r\n    fetchBoards(currentUserId);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    let { fetchBoards, currentUserId } = this.props;\r\n\r\n    if (currentUserId !== prevProps.currentUserId) {\r\n      fetchBoards(currentUserId);\r\n    }\r\n  }\r\n\r\n  deleteBoard = (id, name) => {\r\n    const { onConfirm, deleteBoard } = this.props;\r\n\r\n    if (onConfirm && deleteBoard) {\r\n      onConfirm(undefined, `Delete ${name}?`, () => deleteBoard(id, false));\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid board-list\">\r\n        <div className=\"lane-wrapper lane-item\">\r\n          <div className=\"lane-body\">\r\n            {this.props.boards.map(board => (\r\n              <Item\r\n                key={board.id}\r\n                {...{\r\n                  ...board,\r\n                  editable: this.props.isSignedIn && this.props.currentUserId === board.owner,\r\n                  shareBoard: this.props.shareBoard,\r\n                  deleteBoard: this.deleteBoard\r\n                }}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  let boards = Object.values(state.boards);\r\n  let filter = state.filter.toLowerCase();\r\n\r\n  return {\r\n    boards: boards.filter(board => (board.name || '').toLowerCase().includes(filter)),\r\n    currentUserId: state.auth.isSignedIn ? state.auth.userProfile.id : null,\r\n    isSignedIn: state.auth.isSignedIn\r\n  };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { fetchBoards, shareBoard, deleteBoard }\r\n)(List);\r\n","import server from '../apis/index';\r\nimport worker, { APPENDCHILD, EXCLUDECHILD, REMOVELANE } from '../apis/worker';\r\n\r\nimport {\r\n  FETCH_LANE,\r\n  CREATE_LANE,\r\n  APPEND_LANE,\r\n  EXCLUDE_LANE,\r\n  DELETE_LANE\r\n} from './types';\r\n\r\nexport const fetchLane = (boardId, laneId) => async dispatch => {\r\n  const response = await server.get(`/v1/api/board/${boardId}/lanes/${laneId}`);\r\n\r\n  dispatch({ type: FETCH_LANE, payload: response.data });\r\n};\r\n\r\nexport const createLane = (boardId, name) => async dispatch => {\r\n  const response = await server.post(`/v1/api/board/${boardId}/lanes`, {\r\n    name,\r\n    layout: 'H',\r\n    type: 'L'\r\n  });\r\n\r\n  dispatch({ type: CREATE_LANE, payload: response.data });\r\n\r\n  worker(boardId, [\r\n    {\r\n      id: response.data.id,\r\n      board_id: boardId,\r\n      type: APPENDCHILD,\r\n      payload: { parent_id: boardId }\r\n    }\r\n  ]);\r\n};\r\n\r\nexport const createCardLane = (boardId, laneId, name) => async dispatch => {\r\n  const response = await server.post(`/v1/api/board/${boardId}/lanes`, {\r\n    name,\r\n    type: 'C'\r\n  });\r\n\r\n  dispatch({ type: CREATE_LANE, payload: response.data });\r\n\r\n  worker(boardId, [\r\n    {\r\n      id: response.data.id,\r\n      board_id: boardId,\r\n      type: APPENDCHILD,\r\n      payload: { parent_id: laneId }\r\n    }\r\n  ]);\r\n};\r\n\r\nexport const excludeLane = (boardId, parentId, laneId) => dispatch => {\r\n  worker(boardId, [\r\n    {\r\n      id: laneId,\r\n      board_id: boardId,\r\n      type: EXCLUDECHILD,\r\n      payload: { parent_id: parentId }\r\n    }\r\n  ]);\r\n\r\n  dispatch({ type: EXCLUDE_LANE, payload: { boardId, laneId, parentId } });\r\n};\r\n\r\nexport const appendLane = (boardId, parentId, laneId) => dispatch => {\r\n  worker(boardId, [\r\n    {\r\n      id: laneId,\r\n      board_id: boardId,\r\n      type: APPENDCHILD,\r\n      payload: { parent_id: parentId }\r\n    }\r\n  ]);\r\n\r\n  dispatch({ type: APPEND_LANE, payload: { boardId, laneId, parentId } });\r\n};\r\n\r\nexport const deleteLane = (\r\n  boardId,\r\n  parentId,\r\n  laneId,\r\n  notification\r\n) => dispatch => {\r\n  if (!notification) {\r\n    worker(boardId, [\r\n      {\r\n        id: laneId,\r\n        board_id: boardId,\r\n        type: REMOVELANE,\r\n        payload: { parent_id: parentId }\r\n      }\r\n    ]);\r\n  }\r\n\r\n  dispatch({ type: DELETE_LANE, payload: { boardId, laneId } });\r\n};\r\n\r\nexport const excludeAndDeleteLane = (boardId, parentId, laneId) => dispatch => {\r\n  worker(boardId, [\r\n    {\r\n      id: laneId,\r\n      board_id: boardId,\r\n      type: EXCLUDECHILD,\r\n      payload: { parent_id: parentId }\r\n    },\r\n    {\r\n      id: laneId,\r\n      board_id: boardId,\r\n      type: REMOVELANE,\r\n      payload: { parent_id: parentId }\r\n    }\r\n  ]);\r\n\r\n  dispatch({ type: EXCLUDE_LANE, payload: { boardId, laneId, parentId } });\r\n  dispatch({ type: DELETE_LANE, payload: { boardId, laneId } });\r\n};\r\n","import server from '../apis/index';\r\nimport worker, { APPENDCHILD, EXCLUDECHILD, REMOVECARD } from '../apis/worker';\r\n\r\nimport {\r\n  FETCH_CARD,\r\n  CREATE_CARD,\r\n  APPEND_CARD,\r\n  EXCLUDE_CARD,\r\n  DELETE_CARD\r\n} from './types';\r\n\r\nexport const fetchCard = (boardId, cardId) => async dispatch => {\r\n  const response = await server.get(`/v1/api/board/${boardId}/cards/${cardId}`);\r\n\r\n  dispatch({ type: FETCH_CARD, payload: response.data });\r\n};\r\n\r\nexport const createCard = (boardId, laneId, name) => async dispatch => {\r\n  const response = await server.post(`/v1/api/board/${boardId}/cards`, {\r\n    name\r\n  });\r\n\r\n  dispatch({ type: CREATE_CARD, payload: response.data });\r\n\r\n  worker(boardId, [\r\n    {\r\n      id: response.data.id,\r\n      board_id: boardId,\r\n      type: APPENDCHILD,\r\n      payload: { parent_id: laneId }\r\n    }\r\n  ]);\r\n};\r\n\r\nexport const moveCard = (\r\n  boardId,\r\n  fromLaneId,\r\n  toLaneId,\r\n  cardId\r\n) => async dispatch => {\r\n  dispatch({\r\n    type: EXCLUDE_CARD,\r\n    payload: { boardId, laneId: fromLaneId, cardId }\r\n  });\r\n  dispatch({\r\n    type: APPEND_CARD,\r\n    payload: { boardId, laneId: toLaneId, cardId }\r\n  });\r\n\r\n  let cmds = [\r\n    {\r\n      id: cardId,\r\n      board_id: boardId,\r\n      type: EXCLUDECHILD,\r\n      payload: { parent_id: fromLaneId }\r\n    },\r\n    {\r\n      id: cardId,\r\n      board_id: boardId,\r\n      type: APPENDCHILD,\r\n      payload: { parent_id: toLaneId }\r\n    }\r\n  ];\r\n\r\n  worker(boardId, cmds);\r\n};\r\n\r\nexport const excludeCard = (boardId, laneId, cardId) => async dispatch => {\r\n  worker(boardId, [\r\n    {\r\n      id: cardId,\r\n      board_id: boardId,\r\n      type: EXCLUDECHILD,\r\n      payload: { parent_id: laneId }\r\n    }\r\n  ]);\r\n\r\n  dispatch({ type: EXCLUDE_CARD, payload: { boardId, laneId, cardId } });\r\n};\r\n\r\nexport const appendCard = (boardId, laneId, cardId) => async dispatch => {\r\n  worker(boardId, [\r\n    {\r\n      id: cardId,\r\n      board_id: boardId,\r\n      type: APPENDCHILD,\r\n      payload: { parent_id: laneId }\r\n    }\r\n  ]);\r\n\r\n  dispatch({ type: APPEND_CARD, payload: { boardId, laneId, cardId } });\r\n};\r\n\r\nexport const deleteCard = (\r\n  boardId,\r\n  laneId,\r\n  cardId,\r\n  notification\r\n) => dispatch => {\r\n  if (!notification) {\r\n    worker(boardId, [\r\n      {\r\n        id: cardId,\r\n        board_id: boardId,\r\n        type: REMOVECARD,\r\n        payload: { parent_id: laneId }\r\n      }\r\n    ]);\r\n  }\r\n\r\n  dispatch({ type: DELETE_CARD, payload: { boardId, cardId } });\r\n};\r\n\r\nexport const excludeAndDeleteCard = (\r\n  boardId,\r\n  laneId,\r\n  cardId\r\n) => dispatch => {\r\n  worker(boardId, [\r\n    {\r\n      id: cardId,\r\n      board_id: boardId,\r\n      type: EXCLUDECHILD,\r\n      payload: { parent_id: laneId }\r\n    },\r\n    {\r\n      id: cardId,\r\n      board_id: boardId,\r\n      type: REMOVECARD,\r\n      payload: { parent_id: laneId }\r\n    }\r\n\r\n  ]);\r\n\r\n  dispatch({ type: EXCLUDE_CARD, payload: { boardId, laneId, cardId } });\r\n  dispatch({ type: DELETE_CARD, payload: { boardId, cardId } });\r\n};\r\n","const round = number => Math.round(number * 100) / 100;\r\n\r\nexport default createStore => (reducer, initialState, enhancer) => {\r\n  const monitoredReducer = (state, action) => {\r\n    const start = performance.now();\r\n    const newState = reducer(state, action);\r\n    const end = performance.now();\r\n    const diff = round(end - start);\r\n\r\n    console.log('reducer process time:', diff);\r\n\r\n    return newState;\r\n  };\r\n\r\n  return createStore(monitoredReducer, initialState, enhancer);\r\n};\r\n","export default store => next => action => {\r\n  console.group(action.type || 'THUNK');\r\n  console.info('dispatching', action);\r\n  let result = next(action);\r\n  console.log('next state', store.getState());\r\n  console.groupEnd();\r\n  return result;\r\n};\r\n","import { SIGN_IN, SIGN_OUT } from '../actions/types';\r\n\r\nconst INTIAL_STATE = {\r\n  isSignedIn: null,\r\n  userProfile: null\r\n};\r\n\r\nexport default (state = INTIAL_STATE, action) => {\r\n  switch (action.type) {\r\n    case SIGN_IN:\r\n      return { ...state, isSignedIn: true, userProfile: action.payload };\r\n    case SIGN_OUT:\r\n      return { ...state, isSignedIn: false, userProfile: null };\r\n    default:\r\n      return state;\r\n  }\r\n};","import { combineReducers } from 'redux'\r\nimport authReducer from './authReducer';\r\nimport boardsReducer from './boardsReducer';\r\nimport boardReducer from './boardReducer';\r\nimport filterReducer from './filterReducer'\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport activeBoardReducer from './activeBoardReducer';\r\n\r\nexport default combineReducers({\r\n  auth: authReducer,\r\n  boards: boardsReducer,\r\n  board: boardReducer,\r\n  filter: filterReducer,\r\n  form: formReducer,\r\n  activeBoard: activeBoardReducer\r\n})\r\n","import _ from 'lodash';\r\nimport {\r\n  FETCH_BOARDS,\r\n  CREATE_BOARD,\r\n  FETCH_BOARD,\r\n  RENAME_BOARD,\r\n  SHARE_BOARD,\r\n  DELETE_BOARD\r\n} from '../actions/types';\r\n\r\nexport default (state = {}, action) => {\r\n  switch (action.type) {\r\n    case FETCH_BOARDS:\r\n      return { ..._.mapKeys(action.payload, 'id') };\r\n\r\n    case CREATE_BOARD:\r\n      return { ...state, [action.payload.id]: action.payload };\r\n\r\n    case FETCH_BOARD:\r\n      return { ...state, [action.payload.id]: action.payload };\r\n  \r\n    case RENAME_BOARD:\r\n      return { ...state, [action.payload.id]: action.payload };\r\n\r\n    case SHARE_BOARD:\r\n      return { ...state, [action.payload.id]: action.payload };\r\n\r\n    case DELETE_BOARD:\r\n      return _.omit(state, action.payload);\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import _ from 'lodash';\r\nimport {\r\n  FETCH_BOARD,\r\n  LAYOUT_BOARD,\r\n  FETCH_LANE,\r\n  APPEND_LANE,\r\n  EXCLUDE_LANE,\r\n  CREATE_LANE,\r\n  DELETE_LANE,\r\n  FETCH_CARD,\r\n  APPEND_CARD,\r\n  EXCLUDE_CARD,\r\n  CREATE_CARD,\r\n  DELETE_CARD\r\n} from '../actions/types';\r\n\r\nconst formatBoard = payload => {\r\n  let walkFn = (el, visitFn) => {\r\n    visitFn(el);\r\n\r\n    if (el.lanes) {\r\n      el.lanes.forEach(i => walkFn(i, visitFn));\r\n    }\r\n\r\n    if (el.cards) {\r\n      el.cards.forEach(i => walkFn(i, visitFn));\r\n    }\r\n  };\r\n\r\n  let lanes = [];\r\n  let cards = [];\r\n\r\n  walkFn(payload, el => {\r\n    if (el.type) {\r\n      let children = (el.lanes || el.cards || []).map(i => i.id);\r\n      lanes.push(_.omit({ ...el, children }, ['lanes', 'cards']));\r\n    } else if (el.id !== payload.id) {\r\n      cards.push(el);\r\n    }\r\n  });\r\n\r\n  return {\r\n    ...payload,\r\n    children: (payload.lanes || []).map(i => i.id),\r\n    lanes: _.mapKeys(lanes, 'id'),\r\n    cards: _.mapKeys(cards, 'id')\r\n  };\r\n};\r\n\r\nexport default (state = null, action) => {\r\n  let lane = null;\r\n  switch (action.type) {\r\n    case FETCH_BOARD:\r\n      return formatBoard(action.payload);\r\n\r\n    case LAYOUT_BOARD:\r\n      return { ...state, layout: action.payload };\r\n\r\n    case FETCH_LANE:\r\n      return {\r\n        ...state,\r\n        lanes: {\r\n          ...state.lanes,\r\n          [action.payload.id]: {\r\n            ...action.payload,\r\n            children: action.payload.children || []\r\n          }\r\n        }\r\n      };\r\n\r\n    case CREATE_LANE:\r\n      return {\r\n        ...state,\r\n        lanes: {\r\n          ...state.lanes,\r\n          [action.payload.id]: {\r\n            ...action.payload,\r\n            children: []\r\n          }\r\n        }\r\n      };\r\n\r\n    case DELETE_LANE:\r\n      return state.lanes[action.payload.laneId]\r\n        ? { ...state, lanes: _.omit(state.lanes, action.payload.laneId) }\r\n        : state;\r\n\r\n    case APPEND_LANE:\r\n      lane = state.lanes[action.payload.parentId];\r\n      if (lane) {\r\n        lane.children = lane.children || [];\r\n        lane.children.push(action.payload.laneId);\r\n      } else {\r\n        state.children.push(action.payload.laneId);\r\n      }\r\n      return { ...state };\r\n\r\n    case EXCLUDE_LANE:\r\n      if (state.lanes[action.payload.parentId]) {\r\n        state.lanes[action.payload.parentId].children = _.pull(\r\n          state.lanes[action.payload.parentId].children,\r\n          action.payload.laneId\r\n        );\r\n      } else {\r\n        state.children = _.pull(state.children, action.payload.laneId);\r\n      }\r\n      return { ...state };\r\n\r\n    case APPEND_CARD:\r\n      if (state.lanes[action.payload.laneId]) {\r\n        state.lanes[action.payload.laneId].children.push(action.payload.cardId);\r\n        return { ...state };\r\n      } else {\r\n        return state;\r\n      }\r\n\r\n    case EXCLUDE_CARD:\r\n      if (state.lanes[action.payload.laneId]) {\r\n        state.lanes[action.payload.laneId].children = _.pull(\r\n          state.lanes[action.payload.laneId].children,\r\n          action.payload.cardId\r\n        );\r\n        return { ...state };\r\n      } else {\r\n        return state;\r\n      }\r\n\r\n    case CREATE_CARD:\r\n    case FETCH_CARD:\r\n      return {\r\n        ...state,\r\n        cards: {\r\n          ...state.cards,\r\n          [action.payload.id]: action.payload\r\n        }\r\n      };\r\n\r\n    case DELETE_CARD:\r\n      return state.cards[action.payload.cardId]\r\n        ? { ...state, cards: _.omit(state.cards, action.payload.cardId) }\r\n        : state;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import {\r\n  FILTER_BOARDS\r\n} from '../actions/types';\r\n\r\nexport default (state = '', action) => {\r\n  switch (action.type) {\r\n    case FILTER_BOARDS:\r\n      return action.filter.toLowerCase()\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import {\r\n  ACTIVE_BOARD,\r\n  CLEAN_BOARD\r\n} from '../actions/types';\r\n\r\nexport default (state = null, action) => {\r\n  switch (action.type) {\r\n    case ACTIVE_BOARD:\r\n      return action.payload\r\n    case CLEAN_BOARD:\r\n      return null;\r\n    default:\r\n      return state\r\n  }\r\n}\r\n","import { applyMiddleware, createStore } from 'redux';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nimport monitorReducerEnhancer from './enhancers/monitorReducer';\r\nimport loggerMiddleware from './middleware/logger';\r\nimport rootReducer from './reducers';\r\n\r\nconst configureStore = () => {\r\n  const middlewares = [loggerMiddleware, thunkMiddleware];\r\n  const middlewareEnhancer = applyMiddleware(...middlewares);\r\n\r\n  const enhancers = [middlewareEnhancer, monitorReducerEnhancer];\r\n  const composedEnhancers = composeWithDevTools(...enhancers);\r\n\r\n  return createStore(rootReducer, {}, composedEnhancers);\r\n};\r\n\r\nexport default configureStore();\r\n","import { fetchBoard, deleteBoard } from '../actions/board';\r\nimport { fetchLane, deleteLane } from '../actions/lane';\r\nimport { fetchCard, deleteCard } from '../actions/card';\r\nimport store from '../store';\r\n\r\nconst REFRESHCARDNOTIFICATION = 0;\r\nconst REFRESHLANENOTIFICATION = 1;\r\nconst REFRESHBOARDNOTIFICATION = 2;\r\nconst REMOVECARDNOTIFICATION = 3;\r\nconst REMOVELANENOTIFICATION = 4;\r\nconst REMOVEBOARDNOTIFICATION = 5;\r\nconst CREATECARDNOTIFICATION = 6;\r\nconst CREATELANENOTIFICATION = 7;\r\nconst CREATEBOARDNOTIFICATION = 8;\r\n\r\nlet socket = null;\r\n\r\nfunction createSocket(msg) {\r\n  let conn = new WebSocket(`${process.env.REACT_APP_WS_URL}/v1/api/notify`);\r\n\r\n  conn.onopen = function(evt) {\r\n    console.log('websocket opened');\r\n    if (msg) {\r\n      sendMessage(conn, msg);\r\n    }\r\n  };\r\n\r\n  conn.onclose = function(evt) {\r\n    console.log('websocket closed');\r\n    socket = null;\r\n  };\r\n\r\n  conn.onmessage = function(evt) {\r\n    const ns = JSON.parse(evt.data);\r\n    console.log('websocket: receive', ns);\r\n    if (ns && ns.length) {\r\n      for (let n of ns) {\r\n        processNotification(n);\r\n      }\r\n    } else {\r\n      console.log('array is expected by socket!');\r\n    }\r\n  };\r\n\r\n  return conn;\r\n}\r\n\r\nfunction sendMessage(ws, msg) {\r\n  console.log('websocket: send', JSON.parse(msg));\r\n  ws.send(msg);\r\n}\r\n\r\nfunction processNotification(msg) {\r\n  switch (msg.type) {\r\n    case CREATECARDNOTIFICATION:\r\n    case REFRESHCARDNOTIFICATION:\r\n      fetchCard(msg.board_id, msg.id)(store.dispatch);\r\n      return;\r\n    case CREATELANENOTIFICATION:\r\n    case REFRESHLANENOTIFICATION:\r\n      fetchLane(msg.board_id, msg.id)(store.dispatch);\r\n      return;\r\n    case CREATEBOARDNOTIFICATION:\r\n    case REFRESHBOARDNOTIFICATION:\r\n      fetchBoard(msg.board_id)(store.dispatch);\r\n      return;\r\n    case REMOVECARDNOTIFICATION:\r\n      deleteCard(msg.board_id, undefined, msg.id, true)(store.dispatch);\r\n      return;\r\n    case REMOVELANENOTIFICATION:\r\n      deleteLane(msg.board_id, undefined, msg.id, true)(store.dispatch);\r\n      return;\r\n    case REMOVEBOARDNOTIFICATION:\r\n      deleteBoard(msg.board_id, true)(store.dispatch);\r\n      return;\r\n    default:\r\n  }\r\n}\r\n\r\nexport default msg => {\r\n  if (!socket) {\r\n    console.log('websocket not available');\r\n    socket = createSocket(msg);\r\n    return;\r\n  }\r\n\r\n  sendMessage(socket, msg);\r\n};\r\n","import React from 'react';\r\nimport List from './boards/List';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport socket from '../apis/socket';\r\n\r\nclass Boards extends React.Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.handleShow = this.handleShow.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n\r\n    this.state = {\r\n      show: false,\r\n      title: 'Confirm',\r\n      question: 'Are you sure?',\r\n      yesFn: this.handleClose\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    socket(JSON.stringify({ id: '' }));\r\n  }\r\n\r\n  handleClose(fn) {\r\n    if (fn && typeof fn == 'function') {\r\n      fn();\r\n    }\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  handleShow(title = 'Confirm', question = 'Are you sure?', fn) {\r\n    this.setState({\r\n      show: true,\r\n      title,\r\n      question,\r\n      yesFn: () => this.handleClose(fn)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <List onConfirm={this.handleShow}/>\r\n        <Modal show={this.state.show} onHide={this.handleClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>{this.state.title}</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>{this.state.question}</Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={this.handleClose}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={this.state.yesFn}>\r\n              Yes\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Boards;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { renameBoard, layoutBoard } from '../../actions/board';\r\nimport { createLane } from '../../actions/lane';\r\n\r\nconst Header = ({ editable, update, layout, lane, board }) => {\r\n  let input;\r\n\r\n  const updateButton = () => {\r\n    if (!editable) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"input-group-append\">\r\n        <button\r\n          className=\"btn btn-success btn-sm\"\r\n          onClick={e => {\r\n            if (!input.value.trim()) {\r\n              return;\r\n            }\r\n            update(board.id, input.value);\r\n          }}\r\n        >\r\n          <i className=\"fa fa-fw fa-check\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const layoutButton = () => {\r\n    if (!editable) {\r\n      return null;\r\n    }\r\n\r\n    const layoutIcon = board.layout === 'V' ? 'fa-table' : 'fa-columns';\r\n\r\n    return (\r\n      <button\r\n        className=\"btn btn-sm text-white\"\r\n        onClick={e => {\r\n          layout(board.id, board.layout === 'V' ? 'H' : 'V');\r\n        }}\r\n      >\r\n        <i className={`fa fa-fw ${layoutIcon}`} />\r\n      </button>\r\n    );\r\n  };\r\n\r\n  const laneButton = () => {\r\n    if (!editable) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <button\r\n        className=\"btn btn-sm text-white\"\r\n        onClick={e => {\r\n          lane(board.id, 'Lane');\r\n        }}\r\n      >\r\n        <i className=\"fa fa-fw fa-file\" />\r\n      </button>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar bg-dark navbar-dark\">\r\n      <div className=\"container-fluid no-gutters\">\r\n        <div className=\"col-12 col-sm-12 col-md-6 col-lg-3 ml-auto\">\r\n          <form\r\n            className=\"input-group ml-auto mr-auto\"\r\n            onSubmit={e => {\r\n              e.preventDefault();\r\n            }}\r\n          >\r\n            <div className=\"input-group\">\r\n              <div className=\"input-group-prepend\">\r\n                <Link to={`${process.env.REACT_APP_CONTEXT_ROOT}/`} className=\"btn btn-success btn-sm\">\r\n                  <i className=\"fa fa-fw fa-home\" />\r\n                </Link>\r\n              </div>\r\n              <input\r\n                type=\"search\"\r\n                className=\"form-control form-control-sm\"\r\n                defaultValue={board.name}\r\n                ref={node => (input = node)}\r\n              />\r\n              {updateButton()}\r\n            </div>\r\n          </form>\r\n        </div>\r\n        <div className=\"mr-auto\">\r\n          {laneButton()}\r\n          <button className=\"btn btn-sm text-white\">\r\n            <i className=\"fa fa-fw fa-filter\" />\r\n          </button>\r\n          {layoutButton()}\r\n          <button className=\"btn btn-sm text-white\">\r\n            <i className=\"fa fa-fw fa-gear\" />\r\n          </button>\r\n          <button className=\"btn btn-sm text-white\">\r\n            <i className=\"fa fa-fw fa-refresh\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = () => {\r\n  return {};\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { update: renameBoard, layout: layoutBoard, lane: createLane }\r\n)(Header);\r\n","import React from 'react';\r\nimport Desc from './Desc';\r\n\r\nexport default ({card}) => {\r\n  return (\r\n    <div className=\"card-body py-2\" style={{ overflowY: 'auto' }}>\r\n      <div className=\"card-body-wrapper\">\r\n        <Desc key={card.id} {...{id: card.id, description: card.description}}></Desc>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { Field, reduxForm } from 'redux-form';\r\n\r\nclass Form extends React.Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.handleShow = this.handleShow.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n\r\n    //console.log(`create form`);\r\n\r\n    this.state = {\r\n      show: !!props.visible,\r\n      title: 'Card',\r\n      yesFn: this.handleClose\r\n    };\r\n  }\r\n\r\n  handleClose(fn) {\r\n    if (fn && typeof fn == 'function') {\r\n      fn();\r\n    }\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  handleShow(title = 'Card', fn) {\r\n    this.setState({\r\n      show: true,\r\n      title,\r\n      yesFn: () => this.handleClose(fn)\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.visible !== prevProps.visible) {\r\n      this.setState({ show: !!this.props.visible });\r\n    }\r\n  }\r\n\r\n  renderError({ error, touched }) {\r\n    if (touched && error) {\r\n      return (\r\n        <div className=\"ui error message\">\r\n          <div className=\"header\">{error}</div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  renderInput = ({ input, label, meta }) => {\r\n    const className = `field ${meta.error && meta.touched ? 'error' : ''}`;\r\n    return (\r\n      <div className={className}>\r\n        <label>{label}</label>\r\n        <input {...input} autoComplete=\"off\" />\r\n        {this.renderError(meta)}\r\n      </div>\r\n    );\r\n  };\r\n  \r\n  onSubmit = formValues => {\r\n    this.props.onSubmit(formValues);\r\n  };\r\n\r\n  render() {\r\n    //console.log(`render form`);\r\n\r\n    return (\r\n      <Modal show={this.state.show} onHide={this.handleClose}>\r\n        <form onSubmit={this.props.handleSubmit(this.onSubmit)}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>{this.state.title}</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <Field\r\n              name=\"name\"\r\n              component={this.renderInput}\r\n              label=\"Enter Title\"\r\n            />\r\n            <Field\r\n              name=\"description\"\r\n              component={this.renderInput}\r\n              label=\"Enter Description\"\r\n            />\r\n          </Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={this.handleClose}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={this.state.yesFn}>\r\n              Yes\r\n            </Button>\r\n          </Modal.Footer>\r\n        </form>\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nconst validate = formValues => {\r\n  const errors = {};\r\n\r\n  if (!formValues.name) {\r\n    errors.name = 'You must enter a name';\r\n  }\r\n\r\n  if (!formValues.description) {\r\n    errors.description = 'You must enter a description';\r\n  }\r\n\r\n  return errors;\r\n};\r\n\r\nexport default reduxForm({ form: 'cardForm', validate })(Form);\r\n","import React, { useState } from 'react';\r\nimport Body from './card/Body';\r\nimport Form from './card/Form';\r\n\r\nexport default ({ lane, card, editCard, deleteCard, editable, children }) => {\r\n  const [formVisibility, setFormVisibility] = useState(false);\r\n\r\n  //console.log(`render card ${card ? card.id : 'N/A'}:${card ? card.name : 'N/A'}`);\r\n\r\n  const fn = () => {\r\n    console.log('setting form visible');\r\n    setFormVisibility(true);\r\n  }\r\n\r\n  return (\r\n    <div\r\n      id={card.id}\r\n      className=\"card-wrapper float-left m-3\"\r\n      draggable={editable ? 'true' : 'false'}\r\n      onDragStart={e => {\r\n        //e.dataTransfer.setData('id', e.target.id);\r\n        //e.dataTransfer.setData('card', e.target.id);\r\n        e.dataTransfer.setData('card', card.id);\r\n        e.dataTransfer.setData('parent', lane.id);\r\n      }}\r\n    >\r\n      <div className=\"card shadow item\">\r\n        <div className=\"card-header\">\r\n          <div className=\"card-title mb-0\">\r\n            <div className=\"row mx-0\">\r\n              <div className=\"mr-auto\">{card.name}</div>\r\n              <div\r\n                className=\"hover-card-badges\"\r\n                style={{ display: editable ? 'inline' : 'none' }}\r\n              >\r\n                <i\r\n                  className=\"fa fa-fw fa-pencil text-muted card-badge\"\r\n                  title=\"edit\"\r\n                  onClick={() => fn()}\r\n                />\r\n                <i\r\n                  className=\"fa fa-fw fa-trash text-muted card-badge\"\r\n                  title=\"delete\"\r\n                  onClick={() => deleteCard(card.id)}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Body card={card} />\r\n        <Form visible={formVisibility} initialValues={card}></Form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { excludeAndDeleteLane } from '../../actions/lane';\r\nimport { createCard, moveCard, excludeAndDeleteCard } from '../../actions/card';\r\nimport Card from './Card';\r\n\r\nclass CardLane extends React.Component {\r\n  renderCards() {\r\n    const { lane, board, editable } = this.props;\r\n\r\n    if (!lane || !lane.children) {\r\n      return null;\r\n    }\r\n\r\n    return lane.children\r\n      .map(id => board.cards[id])\r\n      .filter(card => card)\r\n      .map(card => (\r\n        <Card\r\n          key={card.id}\r\n          board={board}\r\n          card={card}\r\n          lane={lane}\r\n          editCard={this.editCard}\r\n          deleteCard={this.deleteCard}\r\n          editable={editable}\r\n        />\r\n      ));\r\n  }\r\n\r\n  createCard = () => {\r\n    const { lane, board, createCard, editable } = this.props;\r\n\r\n    if (editable && lane && createCard) {\r\n      createCard(board.id, lane.id, 'Card');\r\n    }\r\n  };\r\n\r\n  moveCard = (cardId, fromLaneId) => {\r\n    const { lane, board, moveCard, editable } = this.props;\r\n\r\n    if (editable && lane && moveCard) {\r\n      moveCard(board.id, fromLaneId, lane.id, cardId);\r\n    }\r\n  };\r\n\r\n  editCard = id => {\r\n    const { board, editable, onConfirm } = this.props;\r\n\r\n    if (editable) {\r\n      let card = board.cards[id];\r\n      onConfirm(undefined, `Edit ${card.name}?`);\r\n    }\r\n  };\r\n\r\n  deleteCard = id => {\r\n    const {\r\n      lane,\r\n      board,\r\n      excludeAndDeleteCard,\r\n      editable,\r\n      onConfirm\r\n    } = this.props;\r\n\r\n    if (editable && lane && excludeAndDeleteCard) {\r\n      let card = board.cards[id];\r\n      onConfirm(undefined, `Delete ${card.name}?`, () =>\r\n        excludeAndDeleteCard(board.id, lane.id, id)\r\n      );\r\n    }\r\n  };\r\n\r\n  deleteLane = () => {\r\n    const {\r\n      lane,\r\n      board,\r\n      excludeAndDeleteLane,\r\n      parentId,\r\n      editable,\r\n      onConfirm\r\n    } = this.props;\r\n\r\n    if (editable && lane && excludeAndDeleteLane) {\r\n      onConfirm(undefined, `Delete ${lane.name}?`, () =>\r\n        excludeAndDeleteLane(board.id, parentId, lane.id)\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { lane, editable } = this.props;\r\n\r\n    var text = lane.name + (lane.description ? ':' : '');\r\n\r\n    return (\r\n      <div id={lane.id} className=\"lane-wrapper\">\r\n        <div className=\"lane-header card-header border rounded-0\">\r\n          <div className=\"lane-title mb-0\">\r\n            <div className=\"row mx-0\">\r\n              <div className=\"mr-auto\"><b>{text}</b> {lane.description}</div>\r\n              <div\r\n                className=\"hover-card-badges\"\r\n                style={{ display: editable ? 'inline' : 'none' }}\r\n              >\r\n                <i\r\n                  className=\"fa fa-fw fa-file text-muted\"\r\n                  title=\"card\"\r\n                  onClick={this.createCard}\r\n                />\r\n                <i className=\"fa fa-fw fa-pencil text-muted\" title=\"edit\" />\r\n                <i\r\n                  className=\"fa fa-fw fa-trash text-muted\"\r\n                  title=\"delete\"\r\n                  onClick={this.deleteLane}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div\r\n          className=\"lane-body\"\r\n          onDragOver={e => {\r\n            if (e.dataTransfer.types.includes('card')) {\r\n              e.preventDefault();\r\n            }\r\n          }}\r\n          onDrop={e => {\r\n            e.preventDefault();\r\n            let cardId = e.dataTransfer.getData('card');\r\n            let laneId = e.dataTransfer.getData('parent');\r\n            this.moveCard(cardId, laneId);\r\n          }}\r\n        >\r\n          {this.renderCards()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  let board = state.board;\r\n  let lane = board.lanes[ownProps.lane.id];\r\n  return { board, lane };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { createCard, moveCard, excludeAndDeleteCard, excludeAndDeleteLane }\r\n)(CardLane);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport {\r\n  createLane,\r\n  createCardLane,\r\n  excludeAndDeleteLane\r\n} from '../../actions/lane';\r\nimport Lane from './Lane';\r\n\r\nclass CompositeLane extends React.Component {\r\n  renderLanes() {\r\n    const { lane, board, editable, onConfirm } = this.props;\r\n\r\n    if (!lane || !lane.children) {\r\n      return null;\r\n    }\r\n\r\n    return lane.children\r\n      .map(id => board.lanes[id])\r\n      .filter(lane => lane)\r\n      .map(child => (\r\n        <Lane\r\n          key={child.id}\r\n          lane={child}\r\n          board={board}\r\n          parentId={lane.id}\r\n          editable={editable}\r\n          onConfirm={onConfirm}\r\n        />\r\n      ));\r\n  }\r\n\r\n  createChild = () => {\r\n    const { lane, board, createCardLane, editable } = this.props;\r\n\r\n    if (editable && lane && createCardLane) {\r\n      createCardLane(board.id, lane.id, 'CardLane');\r\n    }\r\n  };\r\n\r\n  deleteLane = () => {\r\n    const {\r\n      lane,\r\n      board,\r\n      excludeAndDeleteLane,\r\n      parentId,\r\n      editable,\r\n      onConfirm\r\n    } = this.props;\r\n\r\n    if (editable && lane && excludeAndDeleteLane) {\r\n      onConfirm(undefined, `Delete ${lane.name}?`, () =>\r\n        excludeAndDeleteLane(board.id, parentId, lane.id)\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { lane, editable } = this.props;\r\n\r\n    var text = lane.name + (lane.description ? ':' : '');\r\n\r\n    const layout = (lane && lane.layout) || 'V';\r\n    const style = layout === 'V' ? 'flex-column' : 'flex-row';\r\n\r\n    return (\r\n      <div id={lane.id} className=\"lane-wrapper composite-lane flex-fill\">\r\n        <div className=\"lane-header card-header border rounded-0\">\r\n          <div className=\"lane-title mb-0\">\r\n            <div className=\"row mx-0\">\r\n              <div className=\"mr-auto\"><b>{text}</b> {lane.description}</div>\r\n              <div\r\n                className=\"hover-card-badges\"\r\n                style={{ display: editable ? 'inline' : 'none' }}\r\n              >\r\n                <i\r\n                  className=\"fa fa-fw fa-file text-muted\"\r\n                  title=\"lane\"\r\n                  onClick={this.createChild}\r\n                />\r\n                <i className=\"fa fa-fw fa-pencil text-muted\" title=\"edit\" />\r\n                <i\r\n                  className=\"fa fa-fw fa-trash text-muted\"\r\n                  title=\"delete\"\r\n                  onClick={this.deleteLane}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className={`lane-body d-flex ${style}`}>{this.renderLanes()}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  let board = state.board;\r\n  let lane = board.lanes[ownProps.lane.id];\r\n  return { board, lane };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { createLane, createCardLane, excludeAndDeleteLane }\r\n)(CompositeLane);\r\n","import React from 'react';\r\nimport CardLane from './CardLane';\r\nimport CompositeLane from './CompositeLane';\r\n\r\nexport default ({ lane, board, parentId, editable, onConfirm }) => {\r\n  return lane.type === 'C' ? (\r\n    <CardLane key={lane.id} lane={lane} board={board} parentId={parentId} editable={editable} onConfirm={onConfirm}/>\r\n  ) : (\r\n    <CompositeLane key={lane.id} lane={lane} board={board} parentId={parentId} editable={editable} onConfirm={onConfirm}/>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Lane from './Lane';\r\n\r\nclass Body extends React.Component {\r\n  renderLanes() {\r\n    const { board, editable, onConfirm } = this.props;\r\n\r\n    if (!board || !board.children) {\r\n      return null;\r\n    }\r\n\r\n    return board.children\r\n      .map(id => board.lanes[id])\r\n      .filter(lane => lane)\r\n      .map(lane => (\r\n        <Lane\r\n          key={lane.id}\r\n          lane={lane}\r\n          board={board}\r\n          parentId={board.id}\r\n          editable={editable}\r\n          onConfirm={onConfirm}\r\n        />\r\n      ));\r\n  }\r\n\r\n  render() {\r\n    const board = this.props.board;\r\n    const layout = (board && board.layout) || 'V';\r\n    const style = layout === 'V' ? 'flex-column' : 'flex-row';\r\n\r\n    return (\r\n      <div className={`board-body d-flex ${style}`}>{this.renderLanes()}</div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return { board: state.board };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Body);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Header from './board/Header';\r\nimport Body from './board/Body';\r\nimport socket from '../apis/socket';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport { fetchBoard, activeBoard, cleanBoard } from '../actions/board';\r\n\r\nclass Board extends React.Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this.handleShow = this.handleShow.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n\r\n    this.state = {\r\n      show: false,\r\n      title: 'Confirm',\r\n      question: 'Are you sure?',\r\n      yesFn: this.handleClose\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n    const { fetchBoard, activeBoard } = this.props;\r\n\r\n    fetchBoard(id);\r\n\r\n    activeBoard(id);\r\n\r\n    socket(JSON.stringify({ id }));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { cleanBoard } = this.props;\r\n    \r\n    cleanBoard();\r\n  }\r\n\r\n  handleClose(fn) {\r\n    if (fn && typeof fn == 'function') {\r\n      fn();\r\n    }\r\n    this.setState({ show: false });\r\n  }\r\n\r\n  handleShow(title = 'Confirm', question = 'Are you sure?', fn) {\r\n    this.setState({\r\n      show: true,\r\n      title,\r\n      question,\r\n      yesFn: () => this.handleClose(fn)\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { board, editable } = this.props;\r\n\r\n    if (!board) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <Header board={board} editable={editable} />\r\n        <Body board={board} editable={editable} onConfirm={this.handleShow} />\r\n        <Modal show={this.state.show} onHide={this.handleClose}>\r\n          <Modal.Header closeButton>\r\n            <Modal.Title>{this.state.title}</Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>{this.state.question}</Modal.Body>\r\n          <Modal.Footer>\r\n            <Button variant=\"secondary\" onClick={this.handleClose}>\r\n              Close\r\n            </Button>\r\n            <Button variant=\"primary\" onClick={this.state.yesFn}>\r\n              Yes\r\n            </Button>\r\n          </Modal.Footer>\r\n        </Modal>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  let board = state.board && state.board.id === ownProps.match.params.id ? state.board : null;\r\n  let editable = state.auth.isSignedIn && board && board.owner === state.auth.userProfile.id;\r\n\r\n  return { board, editable };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { fetchBoard, activeBoard, cleanBoard }\r\n)(Board);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signIn, signOut } from '../actions/auth';\r\n\r\nclass GoogleAuth extends React.Component {\r\n  componentDidMount() {\r\n    window.gapi.load('client:auth2', () => {\r\n      window.gapi.client\r\n        .init({\r\n          clientId: `${process.env.REACT_APP_AUTH_CLIENTID}`,\r\n          scope: 'email'\r\n        })\r\n        .then(() => {\r\n          this.auth = window.gapi.auth2.getAuthInstance();\r\n          this.onAuthChange(this.auth.isSignedIn.get());\r\n          this.auth.isSignedIn.listen(this.onAuthChange);\r\n        });\r\n    });\r\n  }\r\n\r\n  onAuthChange = isSignedIn => {\r\n    if (isSignedIn) {\r\n      const profile = this.auth.currentUser.get().getBasicProfile();\r\n      const payload = {\r\n        id: profile.getId(),\r\n        email: profile.getEmail(),\r\n        name: profile.getName()\r\n      };\r\n      this.props.signIn(payload);\r\n    } else {\r\n      this.props.signOut();\r\n    }\r\n  };\r\n\r\n  onSignInClick = () => {\r\n    this.auth.signIn();\r\n  };\r\n\r\n  onSignOutClick = () => {\r\n    this.auth.signOut();\r\n  };\r\n\r\n  render() {\r\n    if (this.props.isSignedIn === null) {\r\n      return null;\r\n    } else if (this.props.isSignedIn) {\r\n      return (\r\n        <button\r\n          onClick={this.onSignOutClick}\r\n          className=\"btn btn-info btn-sm\"\r\n          title={this.props.profile.name}\r\n        >\r\n          <i className=\"fa fa-fw fa-google\" />\r\n        </button>\r\n      );\r\n    } else {\r\n      return (\r\n        <button\r\n          onClick={this.onSignInClick}\r\n          className=\"btn btn-info btn-sm\"\r\n        >\r\n          <i className=\"fa fa-fw fa-google\" />\r\n          Sign In\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return { isSignedIn: state.auth.isSignedIn, profile: state.auth.userProfile };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { signIn, signOut }\r\n)(GoogleAuth);\r\n","import {\r\n  SIGN_IN,\r\n  SIGN_OUT,\r\n} from './types';\r\n\r\nexport const signIn = userId => {\r\n  return {\r\n    type: SIGN_IN,\r\n    payload: userId\r\n  };\r\n};\r\n\r\nexport const signOut = () => {\r\n  return {\r\n    type: SIGN_OUT\r\n  };\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createBoard, filterBoards } from '../actions/board';\r\nimport GoogleAuth from './GoogleAuth';\r\n\r\nconst Header = ({ secure, owner, visible, createBoard, filterBoards }) => {\r\n  let input;\r\n\r\n  const createButton = () => {\r\n    if (!secure) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <div className=\"input-group-append\">\r\n        <button\r\n          className=\"btn btn-info btn-sm\"\r\n          onClick={e => {\r\n            if (!input.value.trim()) {\r\n              return;\r\n            }\r\n            console.log(secure, owner);\r\n            createBoard(input.value, secure ? owner : 'anonymous');\r\n            input.value = '';\r\n          }}\r\n        >\r\n          <i className=\"fa fa-fw fa-check\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <nav className=\"navbar bg-dark navbar-dark fixed-top\" style={{visibility: visible ? 'visible' : 'hidden'}}>\r\n      <div className=\"container-fluid no-gutters\">\r\n        <div className=\"col-12 col-sm-9 col-md-6 col-lg-3 ml-auto mr-auto\">\r\n          <form\r\n            className=\"input-group\"\r\n            onSubmit={e => {\r\n              e.preventDefault();\r\n            }}\r\n          >\r\n            <div className=\"input-group\">\r\n              <div className=\"input-group-prepend\">\r\n                <GoogleAuth />\r\n              </div>\r\n              <input\r\n                type=\"search\"\r\n                className=\"form-control form-control-sm\"\r\n                placeholder=\"Board title...\"\r\n                ref={node => (input = node)}\r\n              />\r\n              {createButton()}\r\n              <div className=\"input-group-append\">\r\n                <button\r\n                  className=\"btn btn-info btn-sm\"\r\n                  onClick={e => {\r\n                    filterBoards(input.value.trim());\r\n                  }}\r\n                >\r\n                  <i className=\"fa fa-fw fa-search\" />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  secure: state.auth.isSignedIn,\r\n  owner: state.auth.userProfile && state.auth.userProfile.id,\r\n  visible: state.activeBoard == null\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { createBoard, filterBoards }\r\n)(Header);\r\n","import { createBrowserHistory as createHistory } from 'history';\r\n\r\nexport default createHistory();","import React from 'react';\nimport Boards from './Boards';\nimport Board from './Board';\nimport Header from './Header';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport history from '../history';\n\nconst App = () => (\n  <Router history={history}>\n    <React.Fragment>\n      <Header />\n      <Switch>\n        <Route\n          path={`${process.env.REACT_APP_CONTEXT_ROOT}/`}\n          exact\n          component={Boards}\n        />\n        <Route\n          path={`${process.env.REACT_APP_CONTEXT_ROOT}/board/:id`}\n          exact\n          component={Board}\n        />\n      </Switch>\n    </React.Fragment>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport { render } from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport App from './components/App';\nimport store from './store';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'font-awesome/css/font-awesome.min.css';\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}