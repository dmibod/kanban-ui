(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){e.exports=n(29)},25:function(e,t,n){},27:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),c=n(10),i=n(2),a="dmitrybodnar.com",l="http".concat("s","://").concat(a),u="ws".concat("s","://").concat(a);n(25),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(27);var d,s=0,f=function(e){return{type:"REMOVE_TODO_STARTED",id:e}},m=function(e){return{type:"REMOVE_TODO_SUCCESS",id:e}},p=function(e,t){return{type:"REMOVE_TODO_FAILURE",id:e,error:t}},v="SHOW_ALL",E="SHOW_COMPLETED",h="SHOW_ACTIVE",O=function(e){var t=e.active,n=e.children,o=e.onClick;return r.a.createElement("button",{onClick:o,disabled:t,style:{marginLeft:"4px"}},n)},g=Object(i.b)(function(e,t){return{active:t.filter===e.visibilityFilter}},function(e,t){return{onClick:function(){return e({type:"SET_VISIBILITY_FILTER",filter:t.filter})}}})(O),b=function(){return r.a.createElement("div",null,r.a.createElement("span",null,"Show: "),r.a.createElement(g,{filter:v},"All"),r.a.createElement(g,{filter:h},"Active"),r.a.createElement(g,{filter:E},"Completed"))},w=Object(i.b)()(function(e){var t,n=e.dispatch;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(e){var o;e.preventDefault(),t.value.trim()&&(n((o=t.value,{type:"ADD_TODO",id:""+s++,text:o})),t.value="")}},r.a.createElement("input",{ref:function(e){return t=e}}),r.a.createElement("button",{type:"submit"},"Add Todo")))}),T=function(e){var t=e.onClick,n=e.completed,o=e.text;return r.a.createElement("li",{onClick:t,style:{textDecoration:n?"line-through":"none"}},o)},y=function(e){var t=e.todos,n=(e.toggleTodo,e.removeTodo);return r.a.createElement("ul",null,t.map(function(e){return r.a.createElement(T,Object.assign({key:e.id},e,{onClick:function(){return n(e.id)}}))}))},S=function(e,t){switch(t){case v:return e;case E:return e.filter(function(e){return e.completed});case h:return e.filter(function(e){return!e.completed});default:throw new Error("Unknown filter: "+t)}},_=Object(i.b)(function(e){return{todos:S(e.todos,e.visibilityFilter)}},function(e){return{toggleTodo:function(t){return e(function(e){return{type:"TOGGLE_TODO",id:e}}(t))},removeTodo:function(t){return e(function(e){return function(t){t(f(e)),fetch("".concat(l,"/v1/api/board/").concat(e),{method:"delete"}).then(function(n){t(m(e))}).catch(function(n){t(p(e,n.message))})}}(t))}}})(y),D=function(){return r.a.createElement("div",null,r.a.createElement(w,null),r.a.createElement(_,null),r.a.createElement(b,null))},k=n(1),C=n(12),I=n(13),L=function(e){return function(t,n,o){return e(function(e,n){var o,r=performance.now(),c=t(e,n),i=performance.now(),a=(o=i-r,Math.round(100*o)/100);return console.log("reducer process time:",a),c},n,o)}},R=function(e){return function(t){return function(n){console.group(n.type),console.info("dispatching",n);var o=t(n);return console.log("next state",e.getState()),console.groupEnd(),o}}},j=n(15),A=n(14),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[].concat(Object(A.a)(e),[{id:t.id,text:t.text,completed:!1}]);case"REMOVE_TODO_STARTED":return e;case"REMOVE_TODO_SUCCESS":return e.filter(function(e){return e.id!==t.id});case"REMOVE_TODO_FAILURE":return e;case"TOGGLE_TODO":return e.map(function(e){return e.id===t.id?Object(j.a)({},e,{completed:!e.completed}):e});default:return e}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VISIBILITY_FILTER":return t.filter;default:return e}},V=Object(k.combineReducers)({todos:x,visibilityFilter:M});fetch("".concat(l,"/v1/api/board")).then(function(e){return e.json()}).then(function(e){var t={todos:e.map(function(e){return{id:e.id,text:e.name,completed:!1}})};(d=function(e){var t=[R,C.a],n=[k.applyMiddleware.apply(void 0,t),L],o=I.composeWithDevTools.apply(void 0,n);return Object(k.createStore)(V,e,o)}(t)).subscribe(U),Object(c.render)(r.a.createElement(i.a,{store:d},r.a.createElement(D,null)),document.getElementById("root"))});var W=[],F=null;function U(){var e=W;if((W=d.getState().todos).length>e.length){var t=W[W.length-1];fetch("".concat(l,"/v1/api/board"),{method:"post",body:JSON.stringify({name:t.text})}).then(function(e){return e.json()}).then(function(e){console.log("Created board:",e)});!function(e){if(console.log("post commands: ",e),!F)return void console.log("shared worker is not available");console.log("commands posted to shared worker"),F.port.postMessage(e)}([{id:"5c3016bc4d74f1000177ed11",type:5,payload:{lane_id:"5c30169d4d74f1000177ed10"}}])}}!function(){var e=new WebSocket("".concat(u,"/v1/api/notify/ws"));e.onclose=function(e){console.log("Connection closed")},e.onmessage=function(e){console.log("notification received",e.data)}}(),window.SharedWorker&&((F=new SharedWorker("worker.js")).port.start(),console.log("shared worker is started"),F.port.addEventListener("message",function(e){console.log("message received by main is..."),console.log(e.data)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,2,1]]]);
//# sourceMappingURL=main.18c3e473.chunk.js.map