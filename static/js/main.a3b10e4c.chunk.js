(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{41:function(e,a,t){e.exports=t(82)},50:function(e,a,t){},82:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),i=t(34),o=t(7);t(50),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(4),s=t.n(c),l=t(10),u=t(36),m=t.n(u),d="dmitrybodnar.com",p="/kanban-ui",f="http".concat("s","://").concat(d),b="ws".concat("s","://").concat(d),v=m.a.create({baseURL:f}),h=null;window.SharedWorker&&((h=new SharedWorker("worker.js")).port.start(),console.log("shared worker: started"),h.port.addEventListener("message",function(e){console.log("main: message received from shared worker",e.data)}));var E=function(e){if(!h)return console.log("main: shared worker is not available"),void v.post("/v1/api/command",e);console.log("main: post commands to shared worker",e),h.port.postMessage(e),console.log("main: commands posted to shared worker")},g=function(e){return function(){var a=Object(l.a)(s.a.mark(function a(t){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.get("/v1/api/board/".concat(e));case 2:n=a.sent,t({type:"FETCH_BOARD",payload:n.data});case 4:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},y=t(12),w=t(13),N=t(15),O=t(14),k=t(16),I=function(e){function a(){var e,t;Object(y.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(N.a)(this,(e=Object(O.a)(a)).call.apply(e,[this].concat(r)))).onAuthChange=function(e){if(e){var a=t.auth.currentUser.get().getBasicProfile(),n={id:a.getId(),email:a.getEmail(),name:a.getName()};t.props.signIn(n)}else t.props.signOut()},t.onSignInClick=function(){t.auth.signIn()},t.onSignOutClick=function(){t.auth.signOut()},t}return Object(k.a)(a,e),Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.gapi.load("client:auth2",function(){window.gapi.client.init({clientId:"745975090298-bi7i72f2akkt9cglmjjsgqh0q9qo2vmt.apps.googleusercontent.com",scope:"email"}).then(function(){e.auth=window.gapi.auth2.getAuthInstance(),e.onAuthChange(e.auth.isSignedIn.get()),e.auth.isSignedIn.listen(e.onAuthChange)})})}},{key:"render",value:function(){return null===this.props.isSignedIn?null:this.props.isSignedIn?r.a.createElement("button",{onClick:this.onSignOutClick,className:"btn btn-info btn-sm",title:this.props.profile.name},r.a.createElement("i",{className:"fa fa-fw fa-google"})):r.a.createElement("button",{onClick:this.onSignInClick,className:"btn btn-info btn-sm"},r.a.createElement("i",{className:"fa fa-fw fa-google"}),"Sign In")}}]),a}(r.a.Component),x=Object(o.b)(function(e){return{isSignedIn:e.auth.isSignedIn,profile:e.auth.userProfile}},{signIn:function(e){return{type:"SIGN_IN",payload:e}},signOut:function(){return{type:"SIGN_OUT"}}})(I),j=Object(o.b)(function(e){return{secure:e.auth.isSignedIn,owner:e.auth.userProfile&&e.auth.userProfile.id}},function(e){return{create:function(a,t){return function(e,a){return function(){var t=Object(l.a)(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.post("/v1/api/board",{name:e,owner:a,layout:"H",shared:!1});case 2:return r=t.sent,t.next=5,v.get("/v1/api/board/".concat(r.data.id));case 5:r=t.sent,n({type:"CREATE_BOARD",payload:r.data});case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(a,t)(e)},filter:function(a){return e(function(e){return{type:"SET_VISIBILITY_FILTER",filter:e}}(a))}}})(function(e){var a,t=e.secure,n=e.owner,i=e.create,o=e.filter;return r.a.createElement("nav",{className:"navbar bg-dark navbar-dark fixed-top"},r.a.createElement("div",{className:"container-fluid no-gutters"},r.a.createElement("div",{className:"col-12 col-sm-9 col-md-6 col-lg-3 ml-auto mr-auto"},r.a.createElement("form",{className:"input-group",onSubmit:function(e){e.preventDefault()}},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement(x,null)),r.a.createElement("input",{type:"search",className:"form-control form-control-sm",placeholder:"Board title...",ref:function(e){return a=e}}),t?r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-info btn-sm",onClick:function(e){a.value.trim()&&(console.log(t,n),i(a.value,t?n:"anonymous"),a.value="")}},r.a.createElement("i",{className:"fa fa-fw fa-check"}))):null,r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-info btn-sm",onClick:function(e){o(a.value.trim())}},r.a.createElement("i",{className:"fa fa-fw fa-search"}))))))))}),q=t(5),S=t(83),C=function(e){var a=e.id,t=e.name,n=e.shared,i=e.editable,o=e.shareBoard,c=e.deleteBoard;return r.a.createElement("div",{id:"".concat(a),className:"card-wrapper float-left m-3"},r.a.createElement("div",{className:"card shadow board"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title mb-0"},r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"mr-auto"},r.a.createElement(S.a,{className:"text-info",style:{textDecoration:"none",fontWeight:"500"},to:"".concat(p,"/board/").concat(a)},t)),r.a.createElement("div",{className:"hover-card-badges",style:{display:i?"inline":"none"}},r.a.createElement("i",{className:"fa fa-fw fa-pencil text-muted",title:"edit"}),r.a.createElement("i",{className:"fa fa-fw fa-eye text-muted",title:"public",style:{display:n?"inline":"none"},onClick:function(){return o(a,!1)}}),r.a.createElement("i",{className:"fa fa-fw fa-eye-slash text-muted",title:"private",style:{display:n?"none":"inline"},onClick:function(){return o(a,!0)}}),r.a.createElement("i",{className:"fa fa-fw fa-trash text-muted",title:"delete",onClick:function(){return c(a)}}))))),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"board-body-wrapper"},r.a.createElement("div",{className:"card-text small text-justify"},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Error quis, sed temporibus numquam voluptas cupiditate nemo corrupti quia velit odio quae natus molestias unde dolor aliquam magni consequuntur nisi at illum inventore maxime! Exercitationem minima voluptate, culpa ut eveniet enim harum illum eius quaerat alias labore fugiat sapiente odit consectetur delectus aliquam amet deleniti in iusto quis tempora ullam optio, nostrum quam! Architecto, laboriosam? Culpa dolorem eum error dignissimos nostrum ea ratione similique hic nesciunt, facere facilis doloremque, praesentium, corporis tempora tempore cupiditate ab quam? Incidunt distinctio tempora a illum eligendi quod voluptatibus excepturi laboriosam natus repellendus? Quam dolor pariatur eveniet error at excepturi aperiam blanditiis voluptatem expedita. Nisi saepe nulla accusantium. Consectetur, velit voluptate corrupti quae repellat quaerat! Vel ut commodi est dolorum ducimus culpa facilis pariatur incidunt, quisquam libero aut sint mollitia quaerat ipsum iusto iure fuga nostrum vitae dolor perferendis eligendi similique earum? Delectus unde sint voluptatibus explicabo vel distinctio dolores illo fugit error officia cupiditate, itaque libero ipsam repudiandae provident quasi omnis modi ipsa eos quibusdam debitis. Aliquam earum quos vel fugit, odit necessitatibus consectetur minima quae tempora quam libero ipsa repellendus eius sunt veritatis distinctio quod a laudantium! Cupiditate accusamus odit voluptatibus, error autem, enim iusto, fuga corporis totam doloremque quaerat? Magni, corporis, et numquam vel, nam reiciendis minima vero ullam deserunt quis officia dolor? Nihil sunt aperiam sequi labore itaque libero repellat quaerat quo sit facilis recusandae ea vero blanditiis nostrum dolorem, illo soluta dignissimos praesentium iure ipsum. Nemo ullam dolorem cupiditate commodi facilis corporis officia nam alias? Impedit, dolores omnis, adipisci, quaerat eligendi aliquam beatae ratione debitis in accusamus eum provident quam aut voluptatibus eveniet nulla. Nam unde aspernatur error dignissimos odit omnis aperiam nesciunt? Quae rerum molestias iusto aliquid harum dolores maiores consequatur voluptate architecto odit facilis sapiente sed, nostrum doloribus modi?")))))},B=function(e){function a(){return Object(y.a)(this,a),Object(N.a)(this,Object(O.a)(a).apply(this,arguments))}return Object(k.a)(a,e),Object(w.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchBoards(this.props.currentUserId)}},{key:"componentDidUpdate",value:function(e){this.props.currentUserId!==e.currentUserId&&this.props.fetchBoards(this.props.currentUserId)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid board-list"},r.a.createElement("div",{className:"lane-wrapper lane-item"},r.a.createElement("div",{className:"lane-body"},this.props.boards.map(function(a){return r.a.createElement(C,Object.assign({key:a.id},Object(q.a)({},a,{editable:e.props.isSignedIn&&e.props.currentUserId===a.owner,shareBoard:e.props.shareBoard,deleteBoard:e.props.deleteBoard})))}))))}}]),a}(r.a.Component),A=Object(o.b)(function(e){var a=Object.values(e.boards),t=e.visibilityFilter.toLowerCase();return{boards:a.filter(function(e){return e.name.toLowerCase().includes(t)}),currentUserId:e.auth.isSignedIn?e.auth.userProfile.id:null,isSignedIn:e.auth.isSignedIn}},{fetchBoards:function(e){return function(){var a=Object(l.a)(s.a.mark(function a(t){var n;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=6;break}return a.next=3,v.get("/v1/api/board?owner=".concat(e));case 3:a.t0=a.sent,a.next=9;break;case 6:return a.next=8,v.get("/v1/api/board");case 8:a.t0=a.sent;case 9:n=a.t0,t({type:"FETCH_BOARDS",payload:n.data});case 11:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()},shareBoard:function(e,a){return function(){var t=Object(l.a)(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.put("/v1/api/board/".concat(e,"/share"),{shared:a});case 2:r=t.sent,n({type:"SHARE_BOARD",payload:r.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},deleteBoard:function(e){return function(){var a=Object(l.a)(s.a.mark(function a(t){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.delete("/v1/api/board/".concat(e));case 2:t({type:"DELETE_BOARD",payload:e});case 3:case"end":return a.stop()}},a,this)}));return function(e){return a.apply(this,arguments)}}()}})(B),R=function(){return r.a.createElement("div",null,r.a.createElement(j,null),r.a.createElement(A,null))},D=Object(o.b)(function(e,a){return{editable:e.auth.isSignedIn&&a.board&&a.board.owner===e.auth.userProfile.id}},function(e){return{update:function(a,t){return function(e,a){return function(){var t=Object(l.a)(s.a.mark(function t(n){var r;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.put("/v1/api/board/".concat(e,"/rename"),{name:a});case 2:r=t.sent,n({type:"RENAME_BOARD",payload:r.data});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(a,t)(e)},layout:function(a,t){return function(e,a){return function(){var t=Object(l.a)(s.a.mark(function t(n){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:E([{id:e,type:6,payload:{layout:a}}]),n({type:"LAYOUT_BOARD",payload:{id:e,layout:a}});case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}(a,t)(e)}}})(function(e){var a,t=e.editable,n=e.update,i=e.layout,o=e.board;return r.a.createElement("nav",{className:"navbar bg-dark navbar-dark"},r.a.createElement("div",{className:"container-fluid no-gutters"},r.a.createElement("div",{className:"col-12 col-sm-12 col-md-6 col-lg-3 ml-auto"},r.a.createElement("form",{className:"input-group ml-auto mr-auto",onSubmit:function(e){e.preventDefault()}},r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement(S.a,{to:"".concat(p,"/"),className:"btn btn-success btn-sm"},r.a.createElement("i",{className:"fa fa-fw fa-home"}))),r.a.createElement("input",{type:"search",className:"form-control form-control-sm",defaultValue:o.name,ref:function(e){return a=e}}),t?r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-success btn-sm",onClick:function(e){a.value.trim()&&n(o.id,a.value)}},r.a.createElement("i",{className:"fa fa-fw fa-check"}))):null))),r.a.createElement("div",{className:"mr-auto"},r.a.createElement("button",{className:"btn btn-sm text-white"},r.a.createElement("i",{className:"fa fa-fw fa-file"})),r.a.createElement("button",{className:"btn btn-sm text-white"},r.a.createElement("i",{className:"fa fa-fw fa-filter"})),function(){if(!t)return null;var e="V"===o.layout?"fa-table":"fa-columns";return r.a.createElement("button",{className:"btn btn-sm text-white",onClick:function(e){i(o.id,"V"===o.layout?"H":"V")}},r.a.createElement("i",{className:"fa fa-fw ".concat(e)}))}(),r.a.createElement("button",{className:"btn btn-sm text-white"},r.a.createElement("i",{className:"fa fa-fw fa-gear"})),r.a.createElement("button",{className:"btn btn-sm text-white"},r.a.createElement("i",{className:"fa fa-fw fa-refresh"})))))}),_=function(e){var a=e.name;return r.a.createElement("div",{className:"card-wrapper float-left m-3"},r.a.createElement("div",{className:"card shadow item"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-title mb-0"},a)),r.a.createElement("div",{className:"card-body py-2",style:{overflow:"hidden"}},r.a.createElement("div",{className:"card-body-wrapper"},r.a.createElement("div",{className:"card-text small text-justify"},"Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur odio fuga perspiciatis nesciunt rem quasi vero deleniti sed beatae ex laborum dignissimos ipsam doloremque, expedita, quae eum voluptates! Ut, necessitatibus!")))))},T=function(e){var a=e.name;return r.a.createElement("div",{className:"lane-wrapper"},r.a.createElement("div",{className:"lane-header card-header border rounded-0"},r.a.createElement("div",{className:"card-title mb-0"},a)),r.a.createElement("div",{className:"lane-body"},r.a.createElement(_,{name:"Card#1"}),r.a.createElement(_,{name:"Card#2"}),r.a.createElement(_,{name:"Card#3"}),r.a.createElement(_,{name:"Card#4"}),r.a.createElement(_,{name:"Card#5"}),r.a.createElement(_,{name:"Card#6"})))},L=function(e){var a=e.board,t="V"===(a&&a.layout||"V")?"flex-column":"flex-row";return r.a.createElement("div",{className:"d-flex ".concat(t)},r.a.createElement(T,{name:"Composite Lane 1"}),r.a.createElement(T,{name:"Composite Lane 2"}))},U=t(11),F=t(37),H=t(38),M=function(e){return function(a,t,n){return e(function(e,t){var n,r=performance.now(),i=a(e,t),o=performance.now(),c=(n=o-r,Math.round(100*n)/100);return console.log("reducer process time:",c),i},t,n)}},P=function(e){return function(a){return function(t){console.group(t.type),console.info("dispatching",t);var n=a(t);return console.log("next state",e.getState()),console.groupEnd(),n}}},V={isSignedIn:null,userProfile:null},W=t(9),J=t(24),G=t.n(J),Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_VISIBILITY_FILTER":return a.filter;default:return e}},Q=Object(U.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SIGN_IN":return Object(q.a)({},e,{isSignedIn:!0,userProfile:a.payload});case"SIGN_OUT":return Object(q.a)({},e,{isSignedIn:!1,userProfile:null});default:return e}},boards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,t=null;switch(a.type){case"FETCH_BOARD_LANES":return t=Object(q.a)({},e[a.payload.id],{lanes:a.payload.lanes}),Object(q.a)({},e,Object(W.a)({},a.payload.id,t));case"FETCH_BOARDS":return Object(q.a)({},G.a.mapKeys(a.payload,"id"));case"FETCH_BOARD":case"CREATE_BOARD":case"RENAME_BOARD":case"SHARE_BOARD":return Object(q.a)({},e,Object(W.a)({},a.payload.id,a.payload));case"DELETE_BOARD":return G.a.omit(e,a.payload);case"LAYOUT_BOARD":return t=Object(q.a)({},e[a.payload.id],{layout:a.payload.layout}),Object(q.a)({},e,Object(W.a)({},a.payload.id,t));default:return e}},visibilityFilter:Y}),K=function(){var e=[P,F.a],a=[U.applyMiddleware.apply(void 0,e),M],t=H.composeWithDevTools.apply(void 0,a);return Object(U.createStore)(Q,{},t)}(),$=0,z=1,X=2,Z=null;function ee(e,a){console.log("websocket: send",JSON.parse(a)),e.send(a)}function ae(e){switch(e.type){case $:case z:case X:return console.log("REFRESHBOARDNOTIFICATION: fetchBoard",e),void g(e.context)(K.dispatch)}}var te=function(e){if(!Z)return console.log("websocket not available"),void(Z=function(e){var a=new WebSocket("".concat(b,"/v1/api/notify"));return a.onopen=function(t){console.log("websocket opened"),e&&ee(a,e)},a.onclose=function(e){console.log("websocket closed"),Z=null},a.onmessage=function(e){var a=JSON.parse(e.data);if(console.log("websocket: receive",a),a&&a.length){var t=!0,n=!1,r=void 0;try{for(var i,o=a[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)ae(i.value)}catch(c){n=!0,r=c}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}else console.log("array is expected by socket!")},a}(e));ee(Z,e)},ne=function(e){function a(){return Object(y.a)(this,a),Object(N.a)(this,Object(O.a)(a).apply(this,arguments))}return Object(k.a)(a,e),Object(w.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.fetchBoard(e),te(JSON.stringify({id:e}))}},{key:"componentWillUnmount",value:function(){te(JSON.stringify({id:""}))}},{key:"render",value:function(){return this.props.board?r.a.createElement("div",null,r.a.createElement(D,{board:this.props.board}),r.a.createElement(L,{board:this.props.board})):r.a.createElement("div",null,"Loading...")}}]),a}(r.a.Component),re=Object(o.b)(function(e,a){return{board:e.boards[a.match.params.id]}},{fetchBoard:g})(ne),ie=t(86),oe=t(85),ce=t(84),se=t(39),le=t.n(se)()(),ue=function(){return r.a.createElement(ie.a,{history:le},r.a.createElement("div",null,r.a.createElement(oe.a,null,r.a.createElement(ce.a,{path:"".concat(p,"/"),exact:!0,component:R}),r.a.createElement(ce.a,{path:"".concat(p,"/board/:id"),component:re}))))};t(78),t(80);Object(i.render)(r.a.createElement(o.a,{store:K},r.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[41,2,1]]]);
//# sourceMappingURL=main.a3b10e4c.chunk.js.map